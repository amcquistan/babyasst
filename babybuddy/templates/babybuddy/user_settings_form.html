{% extends 'babybuddy/page.html' %}
{% load i18n widget_tweaks %}

{% block title %}{% trans "User Settings" %}{% endblock %}

{% block breadcrumbs %}
  <li class="breadcrumb-item active">{% trans "User Settings" %}</li>
{% endblock %}

{% block content %}
    
    <div class="row">
      <div class="col-md-10 offset-1">
        <h1 class='mb-5'>{% trans "User Settings" %}</h1>

        <form role="form" method="post">
          {% csrf_token %}
          {% if form.non_field_errors %}
            {% for error in form.non_field_errors %}
              <div class="alert alert-danger" role="alert">
                {% blocktrans %}<strong>Error:</strong> {{ error }}{% endblocktrans %}
              </div>
            {% endfor %}
          {% elif form.errors %}
            <div class="alert alert-danger" role="alert">
              {% blocktrans %}<strong>Error:</strong> Some fields have errors. See below for details.{% endblocktrans %}
            </div>
          {% endif %}
          <fieldset>
            <legend>{% trans "User Profile" %}</legend>
            <div class="form-group row">
              {% with form_user.first_name as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
            <div class="form-group row">
              {% with form_user.last_name as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
            <div class="form-group row">
              {% with form_user.email as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
            <div class="form-group row">
              {% with form_settings.phone_number as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
            <div class="form-group row">
              {% with form_settings.language as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
          </fieldset>
          <fieldset>
            <legend>{% trans "Dashboard" %}</legend>
            <div class="form-group row">
              {% with form_settings.dashboard_refresh_rate as field %}
                {% include 'babybuddy/form_field.html' %}
              {% endwith %}
            </div>
          </fieldset>
          {% comment %}
          <fieldset>
            <legend>{% trans "API" %}</legend>
            <div class="form-group row">
              <label for="id_email" class="col-sm-2 col-form-label">{% trans "Key" %}</label>
              <div class="col-sm-10">
                <samp>{{ user.settings.api_key }}</samp>
                <a class="btn btn-xs btn-danger" href="{% url 'babybuddy:user-reset-api-key' %}">{% trans "Regenerate" %}</a>
              </div>
            </div>
          </fieldset>
          {% endcomment %}
          <button type="submit" class="btn btn-primary">{% trans "Submit" %}</button>
        </form>
      </div>
    </div>

{% endblock %}
