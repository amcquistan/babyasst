{"version":3,"sources":["babybuddy.js","account.js","bath.js","child_detail.js","diaperchange.js","feeding.js","note.js","notification.js","sleep.js","temperature.js","timer.js","timer_detail.js","tummytime.js","weight.js","dashboard.js"],"names":["jQuery","Error","setUpAJAX","csrftoken","getCookie","ajaxSetup","beforeSend","xhr","settings","csrfSafeMethod","type","crossDomain","setRequestHeader","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","method","test","BabyBuddy","$timerCountSpan","$","timerCheckIntervalId","host","window","location","protocol","ApiRoutes","activeTimersCount","children","child","childId","childTimeline","start","end","notification","notificationId","account","accountId","accountApplyPromo","accounts","baths","bathDetail","bathId","diaperChanges","diaperChangeDetail","changeId","feedings","feedingDetail","feedingId","notes","noteDetail","noteId","sleeping","sleepingDetail","sleepId","temperatures","temperatureDetail","temperatureId","tummyTime","tummyTimeDetail","tummyTimeId","weight","weightDetail","weightId","timers","timerDetail","timerId","setDurationPickerConstraints","initialized","startDefault","endDefault","$startPicker","$endPicker","datetimepicker","defaultDate","format","on","evt","minEndDate","moment","date","add","isAfter","subtract","ChildTimeActivityDao","timeField","activitiesMap","Map","filteredActivitiesMap","fetchedAllData","fetch","url","fetchMoreData","forEach","activity","id","actTime","isSameOrBefore","isSameOrAfter","has","set","get","then","response","Boolean","next","results","copy","Array","from","values","Promise","resolve","reject","ChildDurationActivityDao","actStart","actEnd","DiaperChangeChart","plot","$chartContainer","startDate","endDate","$barChartDays","find","$hoursChart","empty","hoursHt","marginX","marginY","w","width","h","hoursBandHt","wetFill","solidFill","barChartSVG","d3","select","prop","attr","hoursChartSVG","diaperChangeHrs","dc","diaperChangeTime","time","hr","toDate","getHours","isValid","wet","solid","hour","hourOfDay","removeZeroFromHour","Object","startOfDay","startOf","endOfDay","clone","endOf","hoursOfDay","hrOfDay","push","match","c","isBefore","hoursOfDayScaleX","scaleBand","domain","range","hoursOfDayScaleWetColor","scaleLinear","max","x","hoursOfDayScaleSolidColor","selectAll","data","enter","append","classed","d","bandwidth","xAxisHoursChart","axisBottom","call","each","remove","text","xDomain","makeDaysDomain","barChartScaleX","padding","grouped","_","groupBy","s","diaperChangesPerDay","keys","map","day","changes","change","stack","series","maxChanges","barChartScaleY","key","xDay","y","gHt","cnt","xAxisBarChart","tickFormat","timeFormat","yAxisBarChart","axisLeft","labelY","Math","floor","wetCX","solidCX","FeedingChart","$durationChart","$bottleChart","hourlyData","makeHourlyChartingData","matcher","breastFeedings","filter","f","bottleFeedings","isEmpty","durationChartSVG","leftFill","rightFill","breastFeedsPerDay","breastFeeds","left","right","feed","duration","incr","asMinutes","includes","maxDuration","scaleY","round","leftCX","rightCX","bottleChartSVG","groupedByDays","amountPerDay","reduce","days","amtThatDay","totalAmt","amount","maxAmt","SleepChart","sleepSessions","$barChart","sleepTotalPerDay","sleepThatDay","totalSleep","hours","asHours","maxSleep","daySleep","TummyTimeChart","tummyTimeSessions","t","totalPerDay","timeThatDay","totalTime","minutes","maxTime","sessions","color","sessionHours","count","hoursOfDayScaleColor","curDate","updateTimerNavSpan","n","html","show","hide","err","clearInterval","addEventListener","setInterval","startsWith","replace","Account","root","Stripe","stripeCard","userId","user","stripe","stripeElements","$el","$inviteeInput","usersToAddBeforeIncurringCost","$inviteeBtn","$inviteeStripeTokenInput","$inviteeStripeForm","$subscriptionStripeTokenInput","$subscriptionService","$subscriptionStripeForm","$freeAcctBtn","$premiumAcctBtn","$paymentModal","stripeStyle","base","fontSize","self","init","el","uId","aId","elements","click","preventDefault","val","submit","inviteAccountMember","upgradeToPremium","create","style","fetchAccount","e","$form","parent","modal","console","log","$useExistingPaymentSourceSection","$useExistingPaymentSourceCB","hasPaymentSource","payment_source","has_payment_source","paymentSource","brand","exp_month","exp_year","last4","useExisting","mount","$displayErrors","error","message","$paymentBtn","$promoCode","$promoCodeHelpText","promoCode","toggleClass","post","promo_code","requires_purchase","reload","createToken","result","token","invitee","subscription","is_active","addForFree","member_count","max_members","Bath","bath","$timePicker","$tableBody","$addBtn","$saveBtn","$addModal","$deleteModal","$confirmDeleteBtn","$startFilterPicker","$endFilterPicker","bathDao","sleepChart","detailPickerInitialized","cId","bId","ajax","clear","showAddModal","isValidInputs","syncModel","update","fetchAll","syncInputs","defaultTime","syncTable","b","join","$target","currentTarget","parseInt","scrollTo","toISOString","resize","responseJSON","ChildDetail","$timelinePrevBtn","$timelineNextBtn","$timelineContainer","$currentTimelineDate","$baths","$diaperChanges","$feedings","$note","$sleep","$temperature","$tummyTime","$weight","$diaperChangeModal","$feedingModal","$sleepModal","today","childBirthDate","timelineDays","timelineDate","currentTimeline","showTimeline","showPrevDayTimeline","showNextDayTimeline","fetchTimeline","items","sleep","tummytimes","sleepDuration","diff","acc","asMilliseconds","durationDisplay","feedingAmt","lftDuration","k","rtDuration","feedingTitle","$feedingCard","tummytimeDuration","seconds","fetchChild","birth_date","last_bath","last_change","last_feeding","last_note","last_sleep","last_temperature","last_tummytime","last_weight","occured","to","changeType","asSeconds","units","floot","note","substr","humanize","temperature","timeline","tl","lengh","isSame","validateTimelineNavigation","assign","clampedStart","clampedEnd","scaleX","scaleTime","maxY","axisBottomX","axisTopX","axisTop","axisY","ticks","tickSize","svg","minDuration","minTextDy","showDiaperChangeModal","rectHt","showFeedingModal","dy","showSleepModal","diaperCopy","error_message","minDate","$type","$method","$amount","$units","$this","breastOptions","feedingCopy","sleepCopy","DiaperChange","diaperChangeId","diaperChange","$wet","$solid","$color","diaperChangeDao","diaperChangeChart","dId","wetIconClasses","solidIconClasses","capitalize","Feeding","feeding","feedingDao","feedingChart","fId","hasFeeding","ended","durationStr","datesValid","amt","parseFloat","Note","noteDao","nId","Notification","runIntervalId","$childrenSelect","$accountSelect","$frequencyInHours","$intervals","$start","$end","$days","$hours","$minutes","$timerStatus","$notificationForm","lastUpdate","hidden","initialDate","onShow","ct","getMinEndDate","setOptions","debounce","updateEndDate","fetchNotification","active","run","fetchAccounts","fetchChildren","selectedChildId","selectedAcct","a","hasOwnProperty","selectedAcctId","fillChildOptions","hrs","intervals","startDT","endDT","availableChildren","options","selected","first_name","last_name","unshift","removeClass","tick","msHidden","webkitHidden","handleVisibilityChange","updateNotificationDisplay","timeUntilNextNotificationEvent","frequency_hours","addClass","save","now","secsSinceStart","as","freqInSecs","secsUntilNext","r","durationUntilNext","Sleep","sleeps","sleepDao","sId","hasSleep","napIconClasses","nap","Temperature","temperatureDao","temperatureChart","tId","temp","Timers","timerDao","makeDuration","created","status","complete","TimerDetail","$errorModal","$sleepCard","$tummytimeCard","$startBtn","$pauseBtn","$endBtn","$name","$seconds","$timerStatusMsg","$startFeedingPicker","$endFeedingPicker","debounceTimer","periodicUpdateIntervalId","timer","fetchTimer","createTimer","updateTimerDisplay","is_feeding","feedingDuration","feedingEnd","feedingStart","$feedingStart","$feedingEnd","href","syncUI","is_tummytime","is_sleeping","reportTimerStatusMessage","endedAt","is","setTimeout","TummyTime","tummyTimes","$milestone","tummytimeDao","tummytimeChart","hasTummyTime","milestone","Weight","weights","$datePicker","$ounces","weightDao","weightChart","wId","pounds","ounces","wt","toFixed","isNaN","Dashboard","dashboardElement","watch","element_id","refresh_rate"],"mappings":"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","file":"app.js","sourcesContent":["/* Baby Buddy\n *\n * Default namespace for the Baby Buddy app.\n */\nif (typeof jQuery === 'undefined') {\n  throw new Error('Baby Asst requires jQuery.')\n}\n\nfunction setUpAJAX() {\n  var csrftoken = getCookie('csrftoken');\n  jQuery.ajaxSetup({\n    beforeSend: function (xhr, settings) {\n      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n        xhr.setRequestHeader('X-CSRFToken', csrftoken);\n      }\n    }\n  });\n}\n\n\nfunction getCookie (name) {\n  var cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    var cookies = document.cookie.split(';');\n    for (var i = 0; i < cookies.length; i++) {\n      var cookie = cookies[i].trim();\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\nfunction csrfSafeMethod (method) {\n  // these HTTP methods do not require CSRF protection\n  return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\n\nvar BabyBuddy = function () {\n    let $timerCountSpan = $('#timers-count');\n    let timerCheckIntervalId;\n\n    var BabyBuddy = {\n      host: () => {\n        return `${window.location.protocol}//${window.location.host}`;\n      },\n      ApiRoutes: {\n        activeTimersCount: () => {\n          return `/api/active-timers/`;\n        },\n        children: () => {\n          return '/api/children/';\n        },\n        child: (childId) => {\n          return `/api/children/${childId}/`;\n        },\n        childTimeline: (childId, start, end) => {\n          return `/api/children/${childId}/timeline/${start}/${end}/`;\n        },\n        notification: (notificationId) => {\n          return `/api/notifications/${notificationId}/`;\n        },\n        account: (accountId) => {\n          return `/api/accounts/${accountId}/`;\n        },\n        accountApplyPromo: (accountId) => {\n          return `/api/accounts/${accountId}/apply-promo-code/`;\n        },\n        accounts: () => {\n          return '/api/accounts/';\n        },\n        baths: (childId) => {\n          return `/api/children/${childId}/baths/`;\n        },\n        bathDetail: (childId, bathId) => {\n          return `/api/children/${childId}/baths/${bathId}/`;\n        },\n        diaperChanges: (childId) => {\n          return `/api/children/${childId}/changes/`;\n        },\n        diaperChangeDetail: (childId, changeId) => {\n          return `/api/children/${childId}/changes/${changeId}/`;\n        },\n        feedings: (childId) => {\n          return `/api/children/${childId}/feeding/`;\n        },\n        feedingDetail: (childId, feedingId) => {\n          return `/api/children/${childId}/feeding/${feedingId}/`;\n        },\n        notes: (childId) => {\n          return `/api/children/${childId}/notes/`;\n        },\n        noteDetail: (childId, noteId) => {\n          return `/api/children/${childId}/notes/${noteId}/`;\n        },\n        sleeping: (childId) => {\n          return `/api/children/${childId}/sleep/`;\n        },\n        sleepingDetail: (childId, sleepId) => {\n          return `/api/children/${childId}/sleep/${sleepId}/`;\n        },\n        temperatures: (childId) => {\n          return `/api/children/${childId}/temperature/`;\n        },\n        temperatureDetail: (childId, temperatureId) => {\n          return `/api/children/${childId}/temperature/${temperatureId}/`;\n        },\n        tummyTime: (childId) => {\n          return `/api/children/${childId}/tummy-time/`;\n        },\n        tummyTimeDetail: (childId, tummyTimeId) => {\n          return `/api/children/${childId}/tummy-time/${tummyTimeId}/`;\n        },\n        weight: (childId) => {\n          return `/api/children/${childId}/weight/`;\n        },\n        weightDetail: (childId, weightId) => {\n          return `/api/children/${childId}/weight/${weightId}/`;\n        },\n        timers: () => {\n          return `/api/timers/`;\n        },\n        timerDetail: (timerId) => {\n          return `/api/timers/${timerId}/`;\n        }\n      },\n      setDurationPickerConstraints: (initialized, startDefault, endDefault, $startPicker, $endPicker) => {\n        if (!initialized) {\n          $startPicker.datetimepicker({\n            defaultDate: startDefault,\n            format: 'YYYY-MM-DD hh:mm a'\n          });\n    \n          $endPicker.datetimepicker({\n            defaultDate: endDefault,\n            format: 'YYYY-MM-DD hh:mm a'\n          });\n        } else {\n          $startPicker.datetimepicker('date', startDefault);\n          $endPicker.datetimepicker('date', endDefault);\n        }\n\n        // $startPicker.datetimepicker('viewDate', startDefault);\n        // $endPicker.datetimepicker('viewDate', endDefault);\n  \n        $startPicker.on('change.datetimepicker', function(evt){\n          let minEndDate = moment(evt.date).add(1, 'minutes');\n          if (minEndDate.isAfter(moment())) {\n            minEndDate = moment();\n          }\n          $endPicker.datetimepicker('minDate', minEndDate);\n        });\n        $endPicker.on('change.datetimepicker', function(evt){\n          $startPicker.datetimepicker('maxDate', moment(evt.date).subtract(1, 'minutes'));\n        });\n      },\n      ChildTimeActivityDao: (timeField='time') => {\n        let activitiesMap = new Map();\n        let filteredActivitiesMap = new Map();\n        let fetchedAllData = false;\n\n        const fetch = (url, start, end) => {\n          let fetchMoreData = true;\n          activitiesMap.forEach((activity, id) => {\n            const actTime = moment(activity[timeField]);\n            if (start.isSameOrBefore(actTime) && end.isSameOrAfter(actTime) && !filteredActivitiesMap.has(activity.id)) {\n              filteredActivitiesMap.set(activity.id, activity);\n            } else if (start.isAfter(actTime)) {\n              fetchMoreData = false;\n            }\n          });\n          \n          if (!fetchedAllData && fetchMoreData && url) {\n            return $.get(url).then(response => {\n              fetchedAllData = !Boolean(response.next);\n              response.results.forEach((activity) => {\n                if (!activitiesMap.has(activity.id)) {\n                  activitiesMap.set(activity.id, activity);\n                }\n              });\n              return fetch(response.next, start, end);\n            });\n          }\n          const copy = Array.from(filteredActivitiesMap.values());\n          filteredActivitiesMap = new Map();\n          activitiesMap = new Map();\n          fetchedAllData = false;\n          return new Promise((resolve, reject) => resolve(copy));\n        };\n\n        return {\n          fetch\n        };\n      },\n      ChildDurationActivityDao: () => {\n        let activitiesMap = new Map();\n        let filteredActivitiesMap = new Map();\n        let fetchedAllData = false;\n  \n        const fetch = (url, start, end) => {\n          let fetchMoreData = true;\n\n          activitiesMap.forEach((activity, id) => {\n            const actStart = moment(activity.start);\n            const actEnd = moment(activity.end);\n            if (start.isSameOrBefore(actStart) && end.isSameOrAfter(actEnd) && !filteredActivitiesMap.has(activity.id)) {\n              filteredActivitiesMap.set(activity.id, activity);\n            } else if (start.isAfter(actStart)) {\n              fetchMoreData = false;\n            }\n          });\n          if (!fetchedAllData && fetchMoreData && url) {\n            return $.get(url).then(response => {\n              fetchedAllData = !Boolean(response.next);\n              response.results.forEach((activity) => {\n                if (!activitiesMap.has(activity.id)) {\n                  activitiesMap.set(activity.id, activity);\n                }\n              });\n              return fetch(response.next, start, end);\n            });\n          }\n          const copy = Array.from(filteredActivitiesMap.values());\n          filteredActivitiesMap = new Map();\n          activitiesMap = new Map();\n          fetchedAllData = false;\n          return new Promise((resolve, reject) => resolve(copy));\n        };\n  \n        return {\n          fetch\n        };\n      },\n      DiaperChangeChart: () => {\n        const plot = ($chartContainer, diaperChanges, startDate, endDate) => {\n          const $barChartDays = $chartContainer.find('#diaperchange-chart-days');\n          const $hoursChart = $chartContainer.find('#diaperchange-chart-hours');\n          \n          $barChartDays.empty();\n          $hoursChart.empty();\n          const hoursHt = 85;\n          const marginX = 38;\n          const marginY = 30;\n          const w = $chartContainer.width();\n          const h = 320;\n          const hoursBandHt = 17;\n          const wetFill = '#007bff';\n          const solidFill = '#ff8f00';\n\n          const barChartSVG = d3.select(`#${$barChartDays.prop('id')}`).attr('width', w).attr('height', h);\n          const hoursChartSVG = d3.select(`#${$hoursChart.prop('id')}`).attr('width', w).attr('height', hoursHt);\n          \n          let diaperChangeHrs = {};\n          diaperChanges.forEach(dc => {\n            const diaperChangeTime = moment(dc.time);\n            const hr = diaperChangeTime.toDate().getHours();\n            if (diaperChangeTime.isValid()) {\n              if (hr in diaperChangeHrs) {\n                diaperChangeHrs[hr].wet += (dc.wet ? 1 : 0);\n                diaperChangeHrs[hr].solid += (dc.solid ? 1 : 0);\n              } else {\n                diaperChangeHrs[hr] = {\n                  wet: (dc.wet ? 1 : 0),\n                  solid: (dc.solid ? 1 : 0),\n                  hour: hr,\n                  hourOfDay: removeZeroFromHour(diaperChangeTime.format('hh a'))\n                };\n              }\n            }\n          });\n          \n          diaperChangeHrs = Object.values(diaperChangeHrs);\n          const startOfDay = moment().startOf('day');\n          const endOfDay = startOfDay.clone().endOf('day');\n          const hoursOfDay = [];\n          while(startOfDay.isBefore(endOfDay)) {\n            let hrOfDay = removeZeroFromHour(startOfDay.format('hh a'));\n            hoursOfDay.push(hrOfDay);\n            const match = diaperChangeHrs.find(c => c.hourOfDay === hrOfDay);\n            if (!match) {\n              diaperChangeHrs.push({\n                wet: 0,\n                solid: 0,\n                hour: startOfDay.toDate().getHours(),\n                hourOfDay: hrOfDay\n              });\n            }\n\n            startOfDay.add(1, 'hours');\n          }\n          const hoursOfDayScaleX = d3.scaleBand().domain(hoursOfDay).range([marginX, w]);\n          const hoursOfDayScaleWetColor = d3.scaleLinear()\n                                      .domain([0, d3.max(diaperChangeHrs, x => x.wet)])\n                                      .range([\"white\", wetFill]);\n          const hoursOfDayScaleSolidColor = d3.scaleLinear()\n                                      .domain([0, d3.max(diaperChangeHrs, x => x.solid)])\n                                      .range([\"white\", solidFill]);\n\n          hoursChartSVG.selectAll('.hours-count')\n                        .data(diaperChangeHrs)\n                        .enter()\n                          .append('rect')\n                            .classed('.hours-count', true)\n                            .attr('x', d => hoursOfDayScaleX(d.hourOfDay))\n                            .attr('y', 0)\n                            .attr('height', hoursBandHt)\n                            .attr('width', hoursOfDayScaleX.bandwidth())\n                            .attr('fill', d => hoursOfDayScaleSolidColor(d.solid));\n          hoursChartSVG.selectAll('.hours-count')\n                          .data(diaperChangeHrs)\n                          .enter()\n                            .append('rect')\n                            .classed('.hours-count', true)\n                            .attr('x', d => hoursOfDayScaleX(d.hourOfDay))\n                            .attr('y', hoursBandHt)\n                            .attr('height', hoursBandHt)\n                            .attr('width', hoursOfDayScaleX.bandwidth())\n                            .attr('fill', d => hoursOfDayScaleWetColor(d.wet));\n                            \n          const xAxisHoursChart = d3.axisBottom(hoursOfDayScaleX);\n          hoursChartSVG.append('g')\n                        .attr('class', 'x-axis hours-axis')\n                        .attr('transform', `translate(0, ${hoursBandHt * 2})`)\n                        .call(xAxisHoursChart);\n          d3.selectAll('.hours-axis text')\n                              .each(function(x, i){\n                                const remove = w < 800 && i > 0 && i % 3 !== 0;\n                                if (remove) {\n                                  d3.select(this).remove();\n                                }\n                              });\n          \n          hoursChartSVG.append('text')\n                          .classed('diaperchange-legend-text', true)\n                          .attr('x', marginX + ((w - marginX) * 0.5))\n                          .attr('y', hoursHt - 8)\n                          .attr('fill', 'white')\n                          .text('Hourly Frequency');\n\n          const xDomain = BabyBuddy.makeDaysDomain(startDate, endDate);\n\n          const barChartScaleX = d3.scaleBand()\n                            .padding(0.1)\n                            .domain(xDomain)\n                            .range([marginX, w]);\n          const grouped = _.groupBy(diaperChanges, (s) => moment(s.time).startOf('day').toDate());\n          const diaperChangesPerDay = Object.keys(grouped).map(day => {\n            const changes = grouped[day];\n            let wet = 0;\n            let solid = 0;\n            for (let change of changes) {\n              if (change.wet) {\n                wet++;\n              }\n              if (change.solid) {\n                solid++;\n              }\n            }\n            return {\n              day,\n              wet,\n              solid\n            };\n          });\n\n          const stack = d3.stack().keys(['wet','solid']);\n          const series = stack(diaperChangesPerDay);\n\n          const maxChanges = d3.max(diaperChangesPerDay, (change) => change.wet + change.solid);\n          const barChartScaleY = d3.scaleLinear()\n                            .domain([0, maxChanges])\n                            .range([h - 2 * marginY, marginY]);\n\n          barChartSVG.selectAll('g').data(series)\n              .enter()\n                .append('g')\n                .attr('fill', d => d.key === 'wet' ? wetFill : solidFill)\n                .selectAll('rect')\n                .data(d => d)\n                .enter()\n                  .append('rect')\n                  .attr('x', d => {\n                    const xDay = barChartScaleX(d.data.day);\n                    return xDay;\n                  })\n                  .attr('y', d => {\n                    const y = barChartScaleY(d[1]);\n                    return y;\n                  })\n                  .attr('height', d => {\n                    const gHt = barChartScaleY(d[0]) - barChartScaleY(d[1]);\n                    return gHt;\n                  })\n                  .attr('width', barChartScaleX.bandwidth());\n\n          barChartSVG.selectAll('.diaperchange-bar-text').data(series)\n              .enter()\n                .append('g')\n                .selectAll('text')\n                .data(d => d)\n                .enter()\n                  .append('text')\n                  .classed('diaperchange-bar-text', true)\n                  .attr('x', d => {\n                    const xDay = barChartScaleX(d.data.day);\n                    return xDay;\n                  })\n                  .attr('dx', barChartScaleX.bandwidth() * 0.5)\n                  .attr('y', d => {\n                    const y = barChartScaleY(d[1]);\n                    return y;\n                  })\n                  .attr('dy', d => {\n                    const gHt = barChartScaleY(d[0]) - barChartScaleY(d[1]);\n                    return gHt * (gHt < 140 ? 0.7 : 0.52);\n                  })\n                  .attr('fill', 'white')\n                  .text(d => {\n                    const cnt = d[0] === 0 ? d.data.wet : d.data.solid;\n                    return '' + (cnt > 0 ? cnt : '');\n                  });\n          const xAxisBarChart = d3.axisBottom(barChartScaleX).tickFormat(d3.timeFormat('%b-%e'));\n          const yAxisBarChart = d3.axisLeft(barChartScaleY);\n    \n          barChartSVG.append('g')\n              .attr('class', 'x-axis')\n              .attr('transform', 'translate(0, '+ (h - 2 * marginY) +')')\n              .call(xAxisBarChart)\n              .selectAll('text')\n                .attr('transform', 'rotate(-45) translate(-22, 2)');\n\n          barChartSVG.append('g')\n              .attr('class', 'y-axis')\n              .attr('transform', 'translate('+ marginX +',0)')\n              .call(yAxisBarChart);\n\n          const labelY = Math.floor(h * 0.5);\n          barChartSVG.append('text')\n              .attr('x', 14)\n              .attr('y', labelY)\n              .attr('fill', 'white')\n              .classed('sleep-chart-axis-label', true)\n              .attr('transform', 'rotate(-90, 14, ' + labelY + ')')\n              .text('Changes per Day');\n\n          const wetCX = w * (w < 600 ? 0.32 : 0.42);\n          const solidCX = w * (w < 600 ? 0.62 : 0.54);\n          barChartSVG.append('circle')\n                  .attr('cx', wetCX)\n                  .attr('cy', 10)\n                  .attr('r', 10)\n                  .attr('fill', wetFill);\n          barChartSVG.append('circle')\n                  .attr('cx', solidCX)\n                  .attr('cy', 10)\n                  .attr('r', 10)\n                  .attr('fill', solidFill);\n          barChartSVG.append('text')\n                  .classed('diaperchange-legend-text', true)\n                  .attr('x', wetCX + 36)\n                  .attr('y', 15)\n                  .attr('fill', 'white')\n                  .text('wet');\n          barChartSVG.append('text')\n                  .classed('diaperchange-legend-text', true)\n                  .attr('x', solidCX + 40)\n                  .attr('y', 15)\n                  .attr('fill', 'white')\n                  .text('solid');\n\n        };\n        return {\n          plot\n        };\n      },\n      FeedingChart: () => {\n        const plot = ($chartContainer, feedings, startDate, endDate) => {\n          const $hoursChart = $chartContainer.find('#feeding-chart-hours');\n          const $durationChart = $chartContainer.find('#feeding-chart-duration');\n          const $bottleChart = $chartContainer.find('#feeding-chart-bottle');\n          $hoursChart.empty();\n          $durationChart.empty();\n          $bottleChart.empty();\n\n          const w = $chartContainer.width();\n          const h = 320;\n          const hoursHt = 68;\n          const marginX = 44;\n          const marginY = 44;\n\n          const hoursChartSVG = d3.select(`#${$hoursChart.prop('id')}`).attr('width', w).attr('height', hoursHt);\n\n          const hourlyData = BabyBuddy.makeHourlyChartingData(feedings, hoursChartSVG, '#226f97', { w, h:hoursHt, marginX, marginY });\n\n          const xDomain = BabyBuddy.makeDaysDomain(startDate, endDate);\n\n          const barChartScaleX = d3.scaleBand()\n                            .padding(0.1)\n                            .domain(xDomain)\n                            .range([marginX, w]);\n\n          const matcher = /breast*/;\n          const breastFeedings = feedings.filter(f => matcher.test(f.method));\n          const bottleFeedings = feedings.filter(f => !matcher.test(f.method));\n\n          if (!_.isEmpty(breastFeedings)) {\n            const durationChartSVG = d3.select(`#${$durationChart.prop('id')}`).attr('width', w).attr('height', h);\n            const leftFill = '#d77fa1';\n            const rightFill = '#e6b2c6';\n            const grouped = _.groupBy(breastFeedings, (s) => moment(s.start).startOf('day').toDate());\n            const breastFeedsPerDay = Object.keys(grouped).map(day => {\n              const breastFeeds = grouped[day];\n              let left = 0;\n              let right = 0;\n              for (let feed of breastFeeds) {\n                const d = moment.duration(feed.duration);\n                if (d.isValid()) {\n                  const incr = d.asMinutes() * (feed.method === 'both breasts' ? 0.5 : 1);\n                  if (['left breast', 'both breasts'].includes(feed.method)) {\n                    left += incr;\n                  } else {\n                    right += incr;\n                  }\n                }\n              }\n              return {\n                day,\n                left,\n                right\n              };\n            });\n  \n            const stack = d3.stack().keys(['left','right']);\n            const series = stack(breastFeedsPerDay);\n  \n            const maxDuration = d3.max(breastFeedsPerDay, (f) => f.left + f.right);\n            const scaleY = d3.scaleLinear()\n                              .domain([0, maxDuration])\n                              .range([h - 2 * marginY, marginY]);\n  \n            durationChartSVG.selectAll('g').data(series)\n                .enter()\n                  .append('g')\n                  .attr('fill', d => d.key === 'left' ? leftFill : rightFill)\n                  .selectAll('rect')\n                  .data(d => d)\n                  .enter()\n                    .append('rect')\n                    .attr('x', d => {\n                      const xDay = barChartScaleX(d.data.day);\n                      return xDay;\n                    })\n                    .attr('y', d => {\n                      const y = scaleY(d[1]);\n                      return y;\n                    })\n                    .attr('height', d => {\n                      const gHt = scaleY(d[0]) - scaleY(d[1]);\n                      return gHt;\n                    })\n                    .attr('width', barChartScaleX.bandwidth());\n  \n            durationChartSVG.selectAll('.breast-feeding-bar-text').data(series)\n                .enter()\n                  .append('g')\n                  .selectAll('text')\n                  .data(d => d)\n                  .enter()\n                    .append('text')\n                    .classed('breast-feeding-bar-text', true)\n                    .attr('x', d => {\n                      const xDay = barChartScaleX(d.data.day);\n                      return xDay;\n                    })\n                    .attr('dx', barChartScaleX.bandwidth() * 0.5)\n                    .attr('y', d => {\n                      const y = scaleY(d[1]);\n                      return y;\n                    })\n                    .attr('dy', d => {\n                      const gHt = scaleY(d[0]) - scaleY(d[1]);\n                      return gHt * (gHt < 140 ? 0.7 : 0.52);\n                    })\n                    .attr('fill', 'white')\n                    .text(d => {\n                      const cnt = d[0] === 0 ? d.data.left : d.data.right;\n                      return '' + (cnt > 0 ? Math.round(cnt) : '');\n                    });\n            const xAxisBarChart = d3.axisBottom(barChartScaleX).tickFormat(d3.timeFormat('%b-%e'));\n            const yAxisBarChart = d3.axisLeft(scaleY);\n      \n            durationChartSVG.append('g')\n                .attr('class', 'x-axis')\n                .attr('transform', 'translate(0, '+ (h - 2 * marginY) +')')\n                .call(xAxisBarChart)\n                .selectAll('text')\n                  .attr('transform', 'rotate(-45) translate(-22, 2)');\n  \n            durationChartSVG.append('g')\n                .attr('class', 'y-axis')\n                .attr('transform', 'translate('+ marginX +',0)')\n                .call(yAxisBarChart);\n  \n            const labelY = Math.floor(h * 0.43);\n            durationChartSVG.append('text')\n                .attr('x', 14)\n                .attr('y', labelY)\n                .attr('fill', 'white')\n                .classed('chart-axis-label', true)\n                .attr('transform', 'rotate(-90, 14, ' + labelY + ')')\n                .text('Minutes per Day');\n  \n            const leftCX = w * (w < 600 ? 0.32 : 0.42);\n            const rightCX = w * (w < 600 ? 0.62 : 0.54);\n            durationChartSVG.append('circle')\n                    .attr('cx', leftCX)\n                    .attr('cy', 10)\n                    .attr('r', 10)\n                    .attr('fill', leftFill);\n            durationChartSVG.append('circle')\n                    .attr('cx', rightCX)\n                    .attr('cy', 10)\n                    .attr('r', 10)\n                    .attr('fill', rightFill);\n            durationChartSVG.append('text')\n                    .classed('breast-feeding-legend-text', true)\n                    .attr('x', leftCX + 36)\n                    .attr('y', 15)\n                    .attr('fill', 'white')\n                    .text('left');\n            durationChartSVG.append('text')\n                    .classed('breast-feeding-legend-text', true)\n                    .attr('x', rightCX + 40)\n                    .attr('y', 15)\n                    .attr('fill', 'white')\n                    .text('right');\n          }\n\n\n          if (!_.isEmpty(bottleFeedings)) {\n            const bottleChartSVG = d3.select(`#${$bottleChart.prop('id')}`).attr('width', w).attr('height', h);\n            let groupedByDays = _.groupBy(bottleFeedings, (s) => moment(s.start).startOf('day'));\n\n            const amountPerDay = _.reduce(\n                groupedByDays,\n                (days, amtThatDay, day) => {\n                  days.push(amtThatDay.reduce((totalAmt, f) => {\n                    totalAmt.amount += f.amount;\n                    return totalAmt;\n                  }, {day: day, amount: 0}))\n                  return days;\n                }, [])\n  \n            const maxAmt = d3.max(amountPerDay, (f) => f.amount);\n            const scaleY = d3.scaleLinear()\n                              .domain([0, maxAmt])\n                              .range([h - marginY, marginY]);\n            const xAxisBarChart = d3.axisBottom(barChartScaleX).tickFormat(d3.timeFormat('%b-%e'));\n            const yAxisBarChart = d3.axisLeft(scaleY);\n      \n            bottleChartSVG.append('g')\n                .attr('class', 'x-axis')\n                .attr('transform', 'translate(0, '+ (h - marginY) +')')\n                .call(xAxisBarChart)\n                .selectAll('text')\n                  .attr('transform', 'rotate(-45) translate(-22, 2)');\n                \n          \n            bottleChartSVG.append('g')\n                .attr('class', 'y-axis')\n                .attr('transform', 'translate('+ marginX +',0)')\n                .call(yAxisBarChart);\n            \n            const labelY = Math.floor(h * 0.5);\n            bottleChartSVG.append('text')\n                .attr('x', 12)\n                .attr('y', labelY)\n                .attr('fill', 'white')\n                .classed('chart-axis-label', true)\n                .attr('transform', 'rotate(-90, 14, ' + labelY + ')')\n                .text('Ounces per Day');\n      \n            bottleChartSVG.selectAll('.feeding-chart-bar')\n                .data(amountPerDay)\n                  .enter()\n                  .append('rect')\n                  .classed('feeding-chart-bar', true)\n                  .attr('x', d => barChartScaleX(moment(d.day).toDate()))\n                  .attr('y', d => scaleY(d.amount))\n                  .attr('width', barChartScaleX.bandwidth())\n                  .attr('height', d => h - marginY - scaleY(d.amount));\n          }\n          \n        };\n\n        return {\n          plot\n        }\n      },\n      SleepChart: () => {\n        const plot = ($chartContainer, sleepSessions, startDate, endDate) => {\n          const $barChart = $chartContainer.find('#sleep-chart-days')\n          const $hoursChart = $chartContainer.find('#sleep-chart-hours');\n          $barChart.empty();\n          $hoursChart.empty();\n          const w = $chartContainer.width();\n          const h = 320;\n          const hoursHt = 68;\n          const marginX = 44;\n          const marginY = 44;\n\n          const barChartSVG = d3.select(`#${$barChart.prop('id')}`).attr('width', w).attr('height', h);\n          const hoursChartSVG = d3.select(`#${$hoursChart.prop('id')}`).attr('width', w).attr('height', hoursHt);\n          \n          const hourlyData = BabyBuddy.makeHourlyChartingData(\n            sleepSessions,\n            hoursChartSVG,\n            '#ff8f00', {\n              w,\n              h:hoursHt,\n              marginX,\n              marginY\n          });\n\n          const xDomain = BabyBuddy.makeDaysDomain(startDate, endDate);\n\n          const barChartScaleX = d3.scaleBand()\n                            .padding(0.1)\n                            .domain(xDomain)\n                            .range([marginX, w - marginX]);\n          let groupedByDays = _.groupBy(sleepSessions, (s) => moment(s.start).startOf('day'));\n\n          const sleepTotalPerDay = _.reduce(\n              groupedByDays,\n              (days, sleepThatDay, day) => {\n                days.push(sleepThatDay.reduce((totalSleep, s) => {\n                  totalSleep.hours += moment.duration(s.duration).asHours();\n                  return totalSleep;\n                }, {day: day, hours: 0}))\n                return days;\n              }, [])\n\n          const maxSleep = d3.max(sleepTotalPerDay, (daySleep) => daySleep.hours);\n          const barChartScaleY = d3.scaleLinear()\n                            .domain([0, maxSleep])\n                            .range([h - marginY, marginY]);\n          const xAxisBarChart = d3.axisBottom(barChartScaleX).tickFormat(d3.timeFormat('%b-%e'));\n          const yAxisBarChart = d3.axisLeft(barChartScaleY);\n    \n          barChartSVG.append('g')\n              .attr('class', 'x-axis')\n              .attr('transform', 'translate(0, '+ (h - marginY) +')')\n              .call(xAxisBarChart)\n              .selectAll('text')\n                .attr('transform', 'rotate(-45) translate(-22, 2)');\n              \n        \n          barChartSVG.append('g')\n              .attr('class', 'y-axis')\n              .attr('transform', 'translate('+ marginX +',0)')\n              .call(yAxisBarChart);\n          \n          const labelY = Math.floor(h * 0.5);\n          barChartSVG.append('text')\n              .attr('x', 12)\n              .attr('y', labelY)\n              .attr('fill', 'white')\n              .classed('sleep-chart-axis-label', true)\n              .attr('transform', 'rotate(-90, 14, ' + labelY + ')')\n              .text('Hours per Day');\n    \n          barChartSVG.selectAll('.sleep-chart-bar')\n              .data(sleepTotalPerDay)\n                .enter()\n                .append('rect')\n                .classed('sleep-chart-bar', true)\n                .attr('x', d => barChartScaleX(moment(d.day).toDate()))\n                .attr('y', d => barChartScaleY(d.hours))\n                .attr('width', barChartScaleX.bandwidth())\n                .attr('height', d => h - marginY - barChartScaleY(d.hours));\n        };\n  \n        return {\n          plot\n        };\n      },\n      TummyTimeChart: () => {\n        const plot = ($chartContainer, tummyTimeSessions, startDate, endDate) => {\n\n          const $barChart = $chartContainer.find('#tummytime-chart');\n          $barChart.empty();\n\n          const w = $chartContainer.width();\n          const h = 320;\n          const marginX = 44;\n          const marginY = 44;\n\n          const barChartSVG = d3.select(`#${$barChart.prop('id')}`).attr('width', w).attr('height', h);\n\n          const xDomain = BabyBuddy.makeDaysDomain(startDate, endDate);\n\n          const barChartScaleX = d3.scaleBand()\n                            .padding(0.1)\n                            .domain(xDomain)\n                            .range([marginX, w - marginX]);\n          let groupedByDays = _.groupBy(tummyTimeSessions, (t) => moment(t.start).startOf('day'));\n\n          const totalPerDay = _.reduce(\n              groupedByDays,\n              (days, timeThatDay, day) => {\n                days.push(timeThatDay.reduce((totalTime, s) => {\n                  totalTime.minutes += moment.duration(s.duration).asMinutes();\n                  return totalTime;\n                }, {day: day, minutes: 0}))\n                return days;\n              }, [])\n\n          const maxTime = d3.max(totalPerDay, (t) => t.minutes);\n          const barChartScaleY = d3.scaleLinear()\n                            .domain([0, maxTime])\n                            .range([h - marginY, marginY]);\n          const xAxisBarChart = d3.axisBottom(barChartScaleX).tickFormat(d3.timeFormat('%b-%e'));\n          const yAxisBarChart = d3.axisLeft(barChartScaleY);\n    \n          barChartSVG.append('g')\n              .attr('class', 'x-axis')\n              .attr('transform', 'translate(0, '+ (h - marginY) +')')\n              .call(xAxisBarChart)\n              .selectAll('text')\n                .attr('transform', 'rotate(-45) translate(-22, 2)');\n              \n        \n          barChartSVG.append('g')\n              .attr('class', 'y-axis')\n              .attr('transform', 'translate('+ marginX +',0)')\n              .call(yAxisBarChart);\n          \n          const labelY = Math.floor(h * 0.5);\n          barChartSVG.append('text')\n              .attr('x', 12)\n              .attr('y', labelY)\n              .attr('fill', 'white')\n              .classed('chart-axis-label', true)\n              .attr('transform', 'rotate(-90, 14, ' + labelY + ')')\n              .text('Minutes per Day');\n    \n          barChartSVG.selectAll('.tummytime-chart-bar')\n              .data(totalPerDay)\n                .enter()\n                .append('rect')\n                .classed('tummytime-chart-bar', true)\n                .attr('x', d => barChartScaleX(moment(d.day).toDate()))\n                .attr('y', d => barChartScaleY(d.minutes))\n                .attr('width', barChartScaleX.bandwidth())\n                .attr('height', d => h - marginY - barChartScaleY(d.minutes));\n\n        };\n        \n        return {\n          plot\n        };\n      },\n      makeHourlyChartingData: (sessions, hoursChartSVG, color, { w, h, marginX, marginY }) => {\n        let sessionHours = {};\n        sessions.forEach(s => {\n          const start = moment(s.start);\n          const end = moment(s.end);\n          while(start.isValid() && end.isValid() && end.isValid() && start.isBefore(end)) {\n            const hr = start.toDate().getHours();\n            if (hr in sessionHours) {\n              sessionHours[hr].count++;\n            } else {\n              sessionHours[hr] = {\n                count:1,\n                hour:hr,\n                hourOfDay: removeZeroFromHour(start.format('hh a'))\n              };\n            }\n            start.add(1, 'hours');\n          }\n        });\n        \n        sessionHours = Object.values(sessionHours);\n\n        const startOfDay = moment().startOf('day');\n        const endOfDay = startOfDay.clone().endOf('day');\n        const hoursOfDay = [];\n        while(startOfDay.isBefore(endOfDay)) {\n          let hrOfDay = removeZeroFromHour(startOfDay.format('hh a'));\n          hoursOfDay.push(hrOfDay);\n          const match = sessionHours.find(c => c.hourOfDay === hrOfDay);\n          if (!match) {\n            sessionHours.push({\n              count: 0,\n              hour: startOfDay.toDate().getHours(),\n              hourOfDay: hrOfDay\n            });\n          }\n\n          hoursOfDay.push(hrOfDay);\n          startOfDay.add(1, 'hours');\n        }\n\n        const hoursOfDayScaleX = d3.scaleBand().domain(hoursOfDay).range([marginX, w - marginX]);\n        const hoursOfDayScaleColor = d3.scaleLinear()\n                                    .domain([0, d3.max(sessionHours, x => x.count)])\n                                    .range([\"white\", color]);\n\n        hoursChartSVG.selectAll('.hours-count')\n                                    .data(sessionHours)\n                                    .enter()\n                                      .append('rect')\n                                      // .classed('.hours-count', true)\n                                      .classed('hours-count', true)\n                                      .attr('x', d => hoursOfDayScaleX(d.hourOfDay))\n                                      .attr('y', 0)\n                                      .attr('height', h - 45)\n                                      .attr('width', hoursOfDayScaleX.bandwidth())\n                                      .attr('fill', d => hoursOfDayScaleColor(d.count));\n                          \n        const xAxisHoursChart = d3.axisBottom(hoursOfDayScaleX);\n        hoursChartSVG.append('g')\n                      .attr('class', 'x-axis hours-axis')\n                      .attr('transform', 'translate(0, ' + (h - 45) +')')\n                      .call(xAxisHoursChart);\n        d3.selectAll('.hours-axis text')\n                            .each(function(x, i){\n                              const remove = w < 800 && i > 0 && i % 3 !== 0;\n                              if (remove) {\n                                d3.select(this).remove();\n                              }\n                            });\n        hoursChartSVG.append('text')\n                      .classed('sleep-chart-axis-label', true)\n                      .attr('x', marginX + ((w - marginX) * 0.5))\n                      .attr('y', h - 8)\n                      .attr('fill', 'white')\n                      .text('Hourly Frequency');\n                            \n        return { sessionHours, hoursOfDay, hoursOfDayScaleX, hoursOfDayScaleColor };\n      },\n      makeDaysDomain: (startDate, endDate) => {\n        const curDate = startDate.clone();\n        const domain = [];\n        while(curDate.isSameOrBefore(endDate)) {\n          domain.push(curDate.startOf('day').toDate());\n          curDate.add(1, 'days');\n        }\n        return domain;\n      },\n      updateTimerNavSpan: () => {\n        if ($timerCountSpan) {\n          return $.get(BabyBuddy.ApiRoutes.activeTimersCount()).then(response => {\n            const n = response.length;\n            $timerCountSpan.html(''+n);\n            if (n) {\n              $timerCountSpan.show();\n            } else {\n              $timerCountSpan.hide();\n            }\n          }).catch(err => {\n            $timerCountSpan = null;\n            if (timerCheckIntervalId) {\n              clearInterval(timerCheckIntervalId);\n            }\n          });\n        }\n      }\n    };\n\n    window.addEventListener('focus', BabyBuddy.updateTimerNavSpan, false);\n    if (!timerCheckIntervalId && $timerCountSpan) {\n      BabyBuddy.updateTimerNavSpan();\n      timerCheckIntervalId = setInterval(BabyBuddy.updateTimerNavSpan, 6500);\n      $(window).on('beforeunload', () => {\n        clearInterval(timerCheckIntervalId);\n      });\n    }\n\n    return BabyBuddy;\n}();\n\nfunction removeZeroFromHour(hourOfDay) {\n  if (hourOfDay.startsWith('0', '')) {\n    return hourOfDay.replace('0', '');\n  }\n  return hourOfDay;\n} \n\nsetUpAJAX();\n","\nBabyBuddy.Account = function(root) {\n  var $ = root.jQuery;\n  var _ = root._;\n  var Stripe = root.Stripe;\n  var stripeCard = null;\n  var userId = null,\n      accountId = null,\n      user = {},\n      account = {},\n      stripe = null,\n      stripeElements = null,\n      $el = null,\n      $inviteeInput = null,\n      usersToAddBeforeIncurringCost = 0,\n\n      // clicking this means to invite the person to account and, potentially increase subscription\n      $inviteeBtn = null,\n\n      $inviteeStripeTokenInput = null,\n      $inviteeStripeForm = null,\n\n      $subscriptionStripeTokenInput = null,\n      $subscriptionService = null,\n      $subscriptionStripeForm = null,\n\n      // if acct is premium, then clicking this means downgrade to free acct\n      $freeAcctBtn = null,\n\n      // if acct is free, then clicking this means upgrade to premium\n      $premiumAcctBtn = null,\n      $paymentModal = null,\n\n      stripeStyle = {\n        base: {\n          // Add your base input styles here. For example:\n          fontSize: '16px',\n          color: \"#32325d\",\n        }\n      },\n      self = null;\n\n  var Account = {\n    init: function(el, uId, aId, key) {\n      self = this;\n      userId = uId;\n      accountId = aId;\n      stripe = Stripe(key);\n      stripeElements = stripe.elements();\n      $el = $('#' + el);\n      \n      $inviteeInput = $el.find('#invitee');\n      $inviteeBtn = $el.find('#invitee-btn');\n      $inviteeStripeForm = $el.find('#invitee-form');\n      $inviteeStripeTokenInput = $el.find('#stripe_invitee_token');\n\n      $subscriptionStripeForm = $el.find('#subscription-form');\n      $subscriptionStripeTokenInput = $el.find('#stripe_subscription_token');\n      $subscriptionService = $el.find('#stripe_subscription_service');\n      \n      $freeAcctBtn = $el.find('#free-plan-btn');\n      $premiumAcctBtn = $el.find('#premium-plan-btn');\n      $paymentModal = $el.find('#payment-modal');\n\n      $freeAcctBtn.click(function(evt){\n        evt.preventDefault();\n        $subscriptionService.val('free');\n        $subscriptionStripeForm.submit();\n      });\n\n      $inviteeBtn.click(function(evt){\n        evt.preventDefault();\n        self.inviteAccountMember();\n      });\n\n      $premiumAcctBtn.click(function(evt){\n        evt.preventDefault();\n        self.upgradeToPremium();\n      });\n\n      // Create an instance of the card Element.\n      stripeCard = stripeElements.create('card', {style: stripeStyle});\n\n      self.fetchAccount(accountId);\n\n      $el.find('#delete-account-btn').click(function(evt){\n        evt.preventDefault();\n        $el.find('#confirm-delete-account-modal').show();\n        $el.find('#confirm-delete-account-btn').click(function(e){\n          $el.find('#delete-account-form').submit();\n        });\n      });\n\n      $el.find('.deactivate-account-user-btn').click(function(evt){\n        evt.preventDefault();\n        var $form = $(this).parent();\n        $el.find('#confirm-deactivate-member-modal').modal('show');\n        $el.find('#confirm-deactivate-member-btn').click(function(e){\n          $form.submit();\n        });\n      });\n\n      $el.find('.delete-account-user-btn').click(function(evt){\n        evt.preventDefault();\n        var $form = $(this).parent();\n        $el.find('#confirm-delete-member-modal').modal('show');\n        $el.find('#confirm-delete-member-btn').click(function(e){\n          $form.submit();\n        });\n      });\n      \n    },\n    fetchAccount: function(id) {\n      return $.get(BabyBuddy.ApiRoutes.account(id)).then(function(response){\n        account = response;\n        console.log('account', account);\n        return response;\n      });\n    },\n    upgradeToPremium: function (){\n      $paymentModal.find('#purchase-description').html('Upgrade to premium service');\n      \n      var $useExistingPaymentSourceSection = $paymentModal.find('#existing-payment-source-section');\n      var $useExistingPaymentSourceCB = $paymentModal.find('#use-existing-payment-source');\n      var hasPaymentSource = account && account.payment_source && account.payment_source.has_payment_source;\n      if (hasPaymentSource) {\n        var paymentSource = account.payment_source.payment_source;\n        $paymentModal.find('#payment-brand').html(paymentSource.brand);\n        $paymentModal.find('#payment-expmo').html(paymentSource.exp_month);\n        $paymentModal.find('#payment-expyr').html(paymentSource.exp_year);\n        $paymentModal.find('#payment-last4').html(paymentSource.last4);\n        $useExistingPaymentSourceCB.click(function(evt) {\n          var useExisting = $useExistingPaymentSourceCB.prop('checked');\n          if (useExisting) {\n            $paymentModal.find('#cc-container').hide();\n          } else {\n            $paymentModal.find('#cc-container').show();\n          }\n        });\n      } else {\n        $useExistingPaymentSourceSection.empty();\n      }\n\n      // Add an instance of the card Element into the `card-element` <div>.\n      stripeCard.mount('#card-element');\n      stripeCard.addEventListener('change', function(e){\n        var $displayErrors = $el.find('#card-errors');\n        if (e.error) {\n          $displayErrors.html(e.error.message);\n        } else {\n          $displayErrors.html('');\n        }\n      });\n\n      $paymentModal.modal('show');\n\n      var $paymentBtn = $paymentModal.find('#payment-btn');\n\n      var $promoCode = $paymentModal.find('#promo-code');\n      var $promoCodeHelpText = $paymentModal.find('#promo-code-help-text');\n\n      $promoCode.on('input', function(evt){\n        var promoCode = $promoCode.val();\n        if (promoCode) {\n          $paymentBtn.toggleClass('disabled', true);\n          $paymentBtn.prop('disabled', true);\n          $promoCodeHelpText.html('Click to apply promo code before submitting payment');\n        } else {\n          $paymentBtn.toggleClass('disabled', false);\n          $paymentBtn.prop('disabled', false);\n          $promoCodeHelpText.html('');\n        }\n      });\n\n      $paymentModal.find('#apply-promo-btn').click(function(evt) {\n        evt.preventDefault();\n        var promoCode = $promoCode.val();\n        if (promoCode) {\n          console.log('apply promo code ' + promoCode);\n          return $.post(BabyBuddy.ApiRoutes.accountApplyPromo(accountId), {promo_code: promoCode}).then(response => {\n            $paymentBtn.toggleClass('disabled', false);\n            $paymentBtn.prop('disabled', false);\n            $promoCodeHelpText.html(response.message);\n            if (!response.requires_purchase) {\n              root.location.reload(true);\n            }\n            return response;\n          }).catch(err => {\n            $promoCodeHelpText.html(\"Promo code not found\");\n          });\n        }\n      });\n\n      $paymentBtn.click(function(e){\n        e.preventDefault();\n        $subscriptionService.val('premium');\n        if (hasPaymentSource && $useExistingPaymentSourceCB.prop('checked')) {\n          $subscriptionStripeForm.submit();\n        } else {\n          stripe.createToken(stripeCard).then(function(result){\n            if (result.error) {\n              var $displayErrors = $paymentModal.find('#card-errors');\n              $displayErrors.html(result.error.message);\n            } else {\n              $subscriptionStripeTokenInput.val(result.token.id);\n              $subscriptionStripeForm.submit();\n            }\n          });\n        }\n      });\n    },\n    inviteAccountMember: function() {\n      var invitee = $inviteeInput.val();\n      if (!invitee || !account.subscription || !account.subscription.is_active) {\n        return;\n      }\n\n      var addForFree = account.subscription.member_count < account.subscription.max_members\n      if (addForFree) {\n        $inviteeStripeForm.submit();\n        return;\n      }\n\n      $paymentModal.find('#purchase-description').html('Add account member for an additional $1 per month');\n      \n      var $useExistingPaymentSourceSection = $paymentModal.find('#existing-payment-source-section');\n      var $useExistingPaymentSourceCB = $paymentModal.find('#use-existing-payment-source');\n      var hasPaymentSource = account \n              && account.payment_source \n              && account.payment_source.has_payment_source\n              && account.payment_source.payment_source.brand\n              && account.payment_source.payment_source.exp_month\n              && account.payment_source.payment_source.exp_year\n              && account.payment_source.payment_source.last4;\n      if (hasPaymentSource) {\n        var paymentSource = account.payment_source.payment_source;\n        $paymentModal.find('#payment-brand').html(paymentSource.brand);\n        $paymentModal.find('#payment-expmo').html(paymentSource.exp_month);\n        $paymentModal.find('#payment-expyr').html(paymentSource.exp_year);\n        $paymentModal.find('#payment-last4').html(paymentSource.last4);\n      } else {\n        $useExistingPaymentSourceSection.empty();\n      }\n\n      // Add an instance of the card Element into the `card-element` <div>.\n      stripeCard.mount('#card-element');\n      stripeCard.addEventListener('change', function(e){\n        var $displayErrors = $paymentModal.find('#card-errors');\n        if (e.error) {\n          $displayErrors.html(e.error.message);\n        } else {\n          $displayErrors.html('');\n        }\n      });\n\n      $paymentModal.modal('show');\n\n      $paymentModal.find('#payment-btn').click(function(e){\n        e.preventDefault();\n        if (hasPaymentSource && $useExistingPaymentSourceCB.prop('checked')) {\n          $inviteeStripeForm.submit();\n        } else {\n          stripe.createToken(stripeCard).then(function(result){\n            if (result.error) {\n              var $displayErrors = $el.find('#card-errors');\n              $displayErrors.html(result.error.message);\n            } else {\n              $inviteeStripeTokenInput.val(result.token.id);\n              $inviteeStripeForm.submit();\n            }\n          });\n        }\n      });\n    }\n  };\n\n  return Account;\n} (window);\n","\nBabyBuddy.Bath = function() {\n  let $el;\n  let userId;\n  let childId;\n  let bathId;\n  let bath = {};\n  let baths = [];\n  let $timePicker;\n  let $tableBody;\n  let $addBtn;\n  let $saveBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let bathDao;\n  let sleepChart;\n  let detailPickerInitialized = false;\n  let self;\n\n  const Bath = {\n    init: (el, uId, cId, bId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      bathId = bId;\n      $timePicker = $el.find('#bath-datetimepicker_time');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#bath-add-btn');\n      $saveBtn = $el.find('#bath-save-btn');\n      $addModal = $el.find('#bath-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $startFilterPicker = $el.find('#bath-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#bath-filter-datetimepicker_end');\n      bathDao = BabyBuddy.ChildTimeActivityDao();\n      // bathChart = BabyBuddy.BathChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && bathId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.bathDetail(childId, bathId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            window.location.reload();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!bathId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(30, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      self.syncInputs();\n      $addModal.modal('show');\n    },\n    isValidInputs: () => {\n      return $timePicker.datetimepicker('viewDate').isSameOrBefore(moment());\n    },\n    syncInputs: () => {\n      const defaultTime = !_.isEmpty(bath) && bath.time ? moment(bath.time) : moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n    },\n    syncTable: () => {\n      if (!_.isEmpty(baths)) {\n        $tableBody.empty();\n        let html = baths.map(b => {\n          const time = moment(b.time).format('YYYY-MM-DD');\n          return `\n            <tr>\n              <td class=\"text-center\">${time}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-bath=\"${b.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-bath=\"${b.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          bathId = parseInt($target.data('bath'));\n          bath = baths.find(b => b.id === bathId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          bathId = parseInt($target.data('bath'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(bath)) {\n          bath = {};\n        }\n        bath.child = childId;\n        bath.time = $timePicker.datetimepicker('viewDate').toISOString();\n      }\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.bathDetail(childId, bathId))\n        .then((response) => {\n          bath = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.baths(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate');\n      const e = $endFilterPicker.datetimepicker('viewDate');\n      return bathDao.fetch(url, s.startOf('day'), e.endOf('day')).then(response => {\n        baths = response;\n        self.syncTable();\n        $(window).resize(() => {\n          // bathChart.plot($el.find('#bath-chart'), $el.find('#bath-chart-container'), baths, s, e);\n        });\n        // bathChart.plot($el.find('#bath-chart'), $el.find('#bath-chart-container'), baths, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.baths(childId), bath)\n        .then((response) => {\n          bath = response;\n          bathId = response.id;\n          $addModal.modal('hide');\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      $.post(BabyBuddy.ApiRoutes.bathDetail(childId, bathId), bath)\n        .then((response) => {\n          bath = response;\n          $addModal.modal('hide');\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      bathId = null;\n      bath = {};\n      const defaultTime = moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n    }\n  };\n\n  self = Bath;\n  return self;\n}();\n","\nBabyBuddy.ChildDetail = function(root) {\n  var $ = root.$,\n      _ = root._,\n      $el = null,\n      $timelinePrevBtn = null,\n      $timelineNextBtn = null,\n      $timelineContainer = null,\n      $currentTimelineDate = null,\n      $baths = null,\n      $diaperChanges = null,\n      $feedings = null,\n      $note = null,\n      $sleep = null,\n      $temperature = null,\n      $tummyTime = null,\n      $weight = null,\n      $diaperChangeModal = null,\n      $feedingModal = null,\n      $sleepModal = null,\n      childId = null,\n      child = {},\n      today = moment().startOf('day'),\n      childBirthDate = null,\n      timelineDays = [],\n      timelineDate = moment().startOf('day'),\n      currentTimeline = {},\n      self = null;\n\n  var ChildDetail = {\n    init: function(id, el) {\n      self = this;\n      $el = $('#' + el);\n      $timelinePrevBtn = $el.find('#prev-timeline-day');\n      $timelineNextBtn = $el.find('#next-timeline-day');\n      $timelineContainer = $el.find('#timeline-container');\n      $currentTimelineDate = $el.find('#timeline-current-date');\n      $baths = $el.find('#bath-card');\n      $diaperChanges = $el.find('#diaperchange-card');\n      $feedings = $el.find('#feeding-card');\n      $note = $el.find('#note-card');\n      $sleep = $el.find('#sleep-card');\n      $temperature = $el.find('#temperature-card');\n      $tummyTime = $el.find('#tummytime-card');\n      $weight = $el.find('#weight-card');\n      $diaperChangeModal = $el.find('#diaperchange-modal');\n      $feedingModal = $el.find('#feeding-modal');\n      $sleepModal = $el.find('#sleep-modal');\n      childId = id;\n      $(window).resize(function(){self.showTimeline();});\n      $timelinePrevBtn.click(function(evt){\n        evt.preventDefault();\n        self.showPrevDayTimeline();\n      });\n      $timelineNextBtn.click(function(evt){\n        evt.preventDefault();\n        self.showNextDayTimeline();\n      });\n      $currentTimelineDate.html(timelineDate.format('LL'));\n      self.fetchTimeline().then(response => {\n        const endOfDay = moment().endOf('day');\n        const startOfDay = moment().startOf('day');\n        console.log('child response', response);\n\n        const { sleep, feedings, tummytimes } = response.items;\n        const sleepDuration = sleep.map(s => {\n          const end = moment(s.end);\n          const start = moment(s.start);\n          if (start.isBefore(startOfDay)) {\n            return moment.duration(moment(s.end).diff(startOfDay));\n          } else if (end.isAfter(endOfDay)) {\n            return moment.duration(endOfDay.diff(moment(s.start)));\n          }\n          return moment.duration(s.duration);\n        }).reduce((acc, d) => acc.add(d), moment.duration());\n\n        if (sleepDuration.asMilliseconds()) {\n          let durationDisplay;\n          if (sleepDuration.hours() && sleepDuration.minutes()) {\n            durationDisplay = `${sleepDuration.hours()} hrs, ${sleepDuration.minutes()} mins`;\n          } else if (sleepDuration.hours()) {\n            durationDisplay = `${sleepDuration.hours()} hrs`;\n          } else if (sleepDuration.minutes()) {\n            durationDisplay = `${sleepDuration.minutes()} mins`;\n          }\n          $el.find('#todays-sleep').find('.card-title').html(durationDisplay);\n        }\n\n        if (!_.isEmpty(feedings)) {\n          const feedingAmt = feedings.filter(f => f.amount)\n                                      .reduce((acc, f) => acc + f.amount, 0);\n          const lftDuration = feedings.filter(f => ['both breasts', 'left breast'].includes(f.method))\n                      .map(f => {\n                        const d = moment.duration();\n                        const k = f.method === 'both breasts' ? 0.5 : 1;\n                        d.add(moment.duration(f.duration).asMilliseconds() * k, 'ms');\n                        return d;\n                      }).reduce((acc, d) => acc.add(d), moment.duration());\n          const rtDuration = feedings.filter(f => ['both breasts', 'right breast'].includes(f.method))\n                      .map(f => {\n                        const d = moment.duration();\n                        const k = f.method === 'both breasts' ? 0.5 : 1;\n                        d.add(moment.duration(f.duration).asMilliseconds() * k, 'ms');\n                        return d;\n                      }).reduce((acc, d) => acc.add(d), moment.duration());\n          let feedingTitle;\n          if (lftDuration.asMinutes() && rtDuration.asMinutes()) {\n            if (feedingAmt) {\n              feedingTitle = `Left: ${lftDuration.asMinutes()} mins; Right: ${rtDuration.asMinutes()} mins; ${feedingAmt} oz;`;\n            } else {\n              feedingTitle = `Left: ${lftDuration.asMinutes()} mins; Right: ${rtDuration.asMinutes()} mins; ${feedingAmt} oz;`;\n            }\n          } else if (lftDuration.asMinutes()) {\n            if (feedingAmt) {\n              feedingTitle = `Left: ${lftDuration.asMinutes()} mins; ${feedingAmt} oz;`;\n            } else {\n              feedingTitle = `Left: ${lftDuration.asMinutes()} mins`;\n            }\n          } else if (rtDuration.asMinutes()) {\n            if (feedingAmt) {\n              feedingTitle = `Right: ${rtDuration.asMinutes()} mins; ${feedingAmt} oz;`;\n            } else {\n              feedingTitle = `Right: ${rtDuration.asMinutes()} mins`;\n            }\n          } else if (feedingAmt) {\n            feedingTitle = `${feedingAmt} oz`;\n          }\n          const $feedingCard = $el.find('#todays-feedings');\n          $feedingCard.find('.card-title').html(feedingTitle)\n          $feedingCard.find('.card-text').html(`total feeds: ${feedings.length}`);\n        }\n\n        if (!_.isEmpty(tummytimes)) {\n          const tummytimeDuration = tummytimes.map(t => {\n            const end = moment(t.end);\n            const start = moment(t.start);\n            if (start.isBefore(startOfDay)) {\n              return moment.duration(moment(t.end).diff(startOfDay));\n            } else if (end.isAfter(endOfDay)) {\n              return moment.duration(endOfDay.diff(moment(t.start)));\n            }\n            return moment.duration(t.duration);\n          }).reduce((acc, d) => acc.add(d), moment.duration());\n\n          if (tummytimeDuration.asMilliseconds()) {\n            let durationDisplay;\n            if (tummytimeDuration.minutes() && tummytimeDuration.seconds()) {\n              durationDisplay = `${tummytimeDuration.minutes()} mins, ${tummytimeDuration.seconds()} secs`;\n            } else if (tummytimeDuration.minutes()) {\n              durationDisplay = `${tummytimeDuration.minutes()} mins`;\n            } else if (tummytimeDuration.seconds()) {\n              durationDisplay = `${tummytimeDuration.seconds()} secs`;\n            }\n            $el.find('#todays-tummytime').find('.card-title').html(durationDisplay);\n          }\n        }\n      });\n      self.fetchChild();\n    },\n    fetchChild: function() {\n      return $.get(BabyBuddy.ApiRoutes.child(childId))\n        .then(function(response){\n          console.log(response);\n          childBirthDate = moment(response.birth_date).startOf('day');\n          child = response;\n\n          const { last_bath, last_change, last_feeding, last_note, last_sleep, last_temperature, last_tummytime, last_weight } = child;\n\n          if (!_.isEmpty(last_bath)) {\n            const occured = moment().to(last_bath.time);\n            $baths.find('.card-title').html(occured);\n          }\n\n          if (!_.isEmpty(last_change)) {\n            let changeType;\n            if (last_change.wet && last_change.solid) {\n              changeType = 'mixed';\n            } else if (last_change.wet) {\n              changeType = 'wet';\n            } else {\n              changeType = 'solid';\n            }\n            const occured = moment().to(last_change.time);\n            $diaperChanges.find('.card-title').html(occured);\n            $diaperChanges.find('.card-text').html(`${changeType}, ${last_change.color}`);\n          }\n\n          if (!_.isEmpty(last_feeding)) {\n            let duration;\n            if (last_feeding.duration) {\n              duration = moment.duration(last_feeding.duration);\n              if (duration && duration.asSeconds() < 60) {\n                duration = '';\n              }\n            }\n            const occured = moment().to(last_feeding.end);\n            $feedings.find('.card-title').html(`finished ${occured.replace('hours', 'hrs').replace('minutes', 'mins')}`);\n\n            let amount = '';\n            if (last_feeding.amount && duration) {\n              const units = last_feeding.units === 'ounces' ? 'oz' : 'ml';\n              amount = `(${Math.floor(duration.asMinutes())} mins, ${last_feeding.amount} ${units})`;\n            } else if (last_feeding.amount) {\n              amount = `(${last_feeding.amount} oz)`;\n            } else if (duration && duration.isValid()) {\n              amount = `(${Math.floot(duration.asMinutes())} mins)`;\n            }\n            $feedings.find('.card-text').html(`${last_feeding.type}, ${last_feeding.method} ${amount}`);\n          }\n\n          if (!_.isEmpty(last_note)) {\n            const occured = moment().to(last_note.time);\n            $note.find('.card-title').html(occured);\n            let note = '';\n            if (last_note.note) {\n              note = last_note.note.length > 35 ? `${last_note.note.substr(0, 32)} ...` : last_note.note;\n            }\n            $note.find('.card-text').html(note);\n          }\n\n          if (!_.isEmpty(last_sleep)) {\n            const occured = moment().to(last_sleep.end);\n            const duration = moment.duration(last_sleep.duration).humanize();\n            $sleep.find('.card-title').html(`woke ${occured.replace('hours', 'hrs').replace('minutes', 'mins')}`);\n            $sleep.find('.card-text').html(`for ${duration}`);\n          }\n\n          if (!_.isEmpty(last_temperature)) {\n            const occured = moment().to(last_temperature.time);\n            $temperature.find('.card-title').html(occured);\n            $temperature.find('.card-text').html(`${last_temperature.temperature} degrees`)\n          }\n\n          if (!_.isEmpty(last_tummytime)) {\n            const occured = moment().to(last_tummytime.start);\n            $tummyTime.find('.card-title').html(occured);\n\n            const duration = moment.duration(last_tummytime.duration).humanize();\n            $tummyTime.find('.card-text').html(`for ${duration}`);\n          }\n\n          if (!_.isEmpty(last_weight)) {\n            const occured = moment().to(last_weight.date);\n            $weight.find('.card-title').html(occured);\n            $weight.find('.card-text').html(`${last_weight.weight} lbs`);\n          }\n\n          return response;\n        });\n    },\n    fetchTimeline: function() {\n      const s = timelineDate.clone().startOf('day');\n      const e = timelineDate.clone().add(1, 'days').startOf('day');\n      var timeline = timelineDays.filter(function(tl){\n        return tl.start === s.toISOString();\n      });\n      if (timeline && timeline.lengh) {\n        currentTimeline = timeline[0];\n        self.showTimeline();\n      } else {\n        return $.get(BabyBuddy.ApiRoutes.childTimeline(childId, s.toISOString(), e.toISOString()))\n          .then(function(response){\n            console.log('fetchTimeline', response);\n            timelineDays.push(response);\n            currentTimeline = response;\n            self.showTimeline();\n            return response;\n          });\n      }\n    },\n    showPrevDayTimeline: function() {\n      if (!childBirthDate.isSame(timelineDate)) {\n        timelineDate.subtract('days', 1);\n        self.fetchTimeline();\n      }\n      self.validateTimelineNavigation();\n    },\n    showNextDayTimeline: function() {\n      if (!today.isSame(timelineDate)) {\n        timelineDate.add('days', 1);\n        self.fetchTimeline();\n      }\n      self.validateTimelineNavigation();\n    },\n    validateTimelineNavigation: function() {\n      if (childBirthDate.isSame(timelineDate)) {\n        $timelinePrevBtn.prop('disabled', true);\n      } else {\n        $timelinePrevBtn.prop('disabled', false);\n      }\n      if (today.isSame(timelineDate)) {\n        $timelineNextBtn.prop('disabled', true);\n      } else {\n        $timelineNextBtn.prop('disabled', false);\n      }\n    },\n    showTimeline: function() {\n      $currentTimelineDate.html(timelineDate.format('LL'));\n      $el.find('#timeline-chart').empty();\n      $el.find('#timeline-top-axis').empty();\n      $el.find('#timeline-bottom-axis').empty();\n      const startOfDay = timelineDate.clone().startOf('day');\n      const endOfDay = timelineDate.clone().endOf('day');\n\n      let { changes } = currentTimeline.items;\n      const feedings = currentTimeline.items.feedings.map(x => {\n        let duration = moment.duration(x.duration);\n        let start = moment(x.start);\n        let end = moment(x.end);\n        if (moment(x.start).isBefore(startOfDay)) {\n          start = startOfDay.clone();\n          duration = moment.duration(moment(x.end).diff(start));\n        } else if (moment(x.end).isAfter(endOfDay)) {\n          end = endOfDay.clone();\n          duration = moment.duration(end.diff(x.start));\n        }\n        return Object.assign({duration, clampedStart: start.toISOString(), clampedEnd: end.toISOString()}, x);\n      });\n      const sleep = currentTimeline.items.sleep.map(x => {\n        let duration = moment.duration(x.duration);\n        let start = moment(x.start);\n        let end = moment(x.end);\n        if (moment(x.start).isBefore(startOfDay)) {\n          start = startOfDay.clone();\n          duration = moment.duration(moment(x.end).diff(start));\n        } else if (moment(x.end).isAfter(endOfDay)) {\n          end = endOfDay.clone();\n          duration = moment.duration(end.diff(x.start));\n        }\n        return Object.assign({duration, clampedStart: start.toISOString(), clampedEnd: end.toISOString()}, x);\n      });\n\n      console.log('feedings', feedings);\n\n      const h = 1200;\n      const w = $el.find('#timeline-card').width();\n      const marginX = 50;\n      const marginY = 50;\n\n      const start = timelineDate.clone().startOf('day');\n      const end = timelineDate.clone().endOf('day');\n\n      const scaleX = d3.scaleBand()\n                        .domain(['Changes', 'Feedings', 'Sleep'])\n                        .range([marginX, w - marginX]);\n      const scaleY = d3.scaleTime()\n                        .domain([start.toDate(), end.toDate()])\n                        .range([marginY, h]);\n\n      const maxY = scaleY(end.toDate());\n      const axisBottomX = d3.axisBottom(scaleX);\n      const axisTopX = d3.axisTop(scaleX);\n      const axisY = d3.axisLeft(scaleY).ticks(24, d3.timeFormat('%I %p')).tickSize(w - (marginX * 2));\n                        \n      const svg = d3.select('#timeline-chart').attr('width',  w).attr('height', h);\n                  \n      d3.select('#timeline-top-axis')\n          .attr('width', w)\n          .attr('height', 30)\n          .append('g')\n            .attr('class', 'x-axis')\n            .attr('transform', 'translate(0, 22)')\n            .call(axisTopX);\n\n      d3.select('#timeline-bottom-axis')\n          .attr('width', w)\n          .attr('height', 30)\n          .append('g')\n            .attr('class', 'x-axis')\n            .call(axisBottomX);\n            \n      svg.append('g').attr('class', 'y-axis')\n          .attr('transform', 'translate(' + (w - marginX) + ', 0)')\n          .call(axisY)\n          .select(\".domain\").remove();\n\n      const minDuration = scaleY(start.clone().add(moment.duration(20,'minutes')).toDate()) - scaleY(start.toDate());\n      const minTextDy = scaleY(start.clone().add(moment.duration(15,'minutes')).toDate()) - scaleY(start.toDate());\n\n      svg.selectAll('.diaper-change-tl')\n        .data(changes)\n        .enter()\n          .append('rect')\n          .classed('diaper-change-tl', true)\n          .attr('x', scaleX('Changes'))\n          .attr('y', d => scaleY(moment(d.time).toDate()))\n          .attr('fill', d => d.color)\n          .attr('width', scaleX.bandwidth())\n          .attr('height', minDuration)\n          .on('click', d => self.showDiaperChangeModal(d));\n  \n      svg.selectAll('.diaper-change-tl-label')\n          .data(changes)\n          .enter()\n            .append('text')\n            .classed('diaper-change-tl-label', true)\n            .attr('x', scaleX('Changes'))\n            .attr('y', d => scaleY(moment(d.time).toDate()))\n            .attr('dy', minTextDy)\n            .attr('dx', scaleX.bandwidth() * 0.5)\n            .attr('fill', d => d.color === 'yellow' ? 'black' : 'white')\n            .text(d => {\n              let changeType;\n              if (d.wet && d.solid) {\n                changeType = 'mixed';\n              } else if (d.wet) {\n                changeType = 'wet';\n              } else {\n                changeType = 'solid';\n              }\n              return changeType;\n            })\n            .on('click', d => self.showDiaperChangeModal(d));\n  \n      svg.selectAll('.feeding-tl')\n          .data(feedings)\n          .enter()\n            .append('rect')\n            .classed('feeding-tl', true)\n            .attr('x', scaleX('Feedings'))\n            .attr('y', d => scaleY(moment(d.clampedStart).toDate()))\n            .attr('width', scaleX.bandwidth())\n            .attr('height', d => {\n                const s = scaleY(moment(d.clampedStart).toDate());\n                let e = scaleY(moment(d.clampedEnd).toDate());\n                e = e > maxY ? maxY : e;\n                const rectHt = e - s;\n                return rectHt < minDuration ? minDuration : rectHt;\n            })\n            .on('click', d => self.showFeedingModal(d));\n\n      svg.selectAll('.feeding-tl-label')\n          .data(feedings)\n          .enter()\n            .append('text')\n            .classed('feeding-tl-label', true)\n            .attr('x', scaleX('Feedings'))\n            .attr('y', d => scaleY(moment(d.clampedStart).toDate()))\n            .attr('dx', scaleX.bandwidth() * 0.5)\n            .attr('fill', 'white')\n            .attr('dy', d => {\n                const s = scaleY(moment(d.clampedStart).toDate());\n                let e = scaleY(moment(d.clampedEnd).toDate());\n                e = e > maxY ? maxY : e;\n                const dy = (e - s) * 0.65;\n                return dy < minTextDy ? minTextDy : dy;\n            })\n            .text(d => {\n              if (d.method === 'bottle') {\n                const units = d.units === 'ounces' ? 'oz' : 'ml';\n                return `${d.amount} ${units}`;\n              }\n\n              const duration = moment.duration(d.duration);\n              if (d.method === 'left breast') {\n                return `Left: ${duration.asMinutes()} mins`;\n              } else if (d.method === 'right breast') {\n                return `Right: ${duration.asMinutes()} mins`;\n              }\n\n              return `Both: ${duration.asMinutes()} mins`;\n            })\n            .on('click', d => self.showFeedingModal(d));\n        \n      svg.selectAll('.sleep-tl')\n          .data(sleep)\n          .enter()\n            .append('rect')\n            .classed('sleep-tl', true)\n            .attr('x', scaleX('Sleep'))\n            .attr('y', d => scaleY(moment(d.clampedStart).toDate()))\n            .attr('width', scaleX.bandwidth())\n            .attr('height', function(d){\n                const s = scaleY(moment(d.clampedStart).toDate());\n                let e = scaleY(moment(d.clampedEnd).toDate());\n                e = e > maxY ? maxY : e;\n                return (e - s);\n            })\n            .on('click', d => self.showSleepModal(d));\n        \n      svg.selectAll('.sleep-tl-label')\n          .data(sleep)\n          .enter()\n            .append('text')\n            .classed('sleep-tl-label', true)\n            .attr('x', scaleX('Sleep'))\n            .attr('y', d => scaleY(moment(d.clampedStart).toDate()))\n            .attr('dx', scaleX.bandwidth() * 0.5)\n            .attr('dy', d => {\n                const s = scaleY(moment(d.clampedStart).toDate());\n                let e = scaleY(moment(d.clampedEnd).toDate());\n                e = e > maxY ? maxY : e;\n                const dy = e - s;\n                return dy < minDuration ? minTextDy : dy * 0.65;\n            })\n            .text(d => moment.duration(d.duration).humanize())\n            .on('click', d => self.showSleepModal(d));\n    },\n    showDiaperChangeModal: function(d) {\n      $diaperChangeModal.modal('show');\n      $diaperChangeModal.find('#diaperchange-time').val(moment(d.time).format('YYYY-MM-DD hh:mm a'));\n      $diaperChangeModal.find('#diaperchange-datetimepicker_time').datetimepicker({\n        defaultDate: 'now',\n        format: 'YYYY-MM-DD hh:mm a'\n      });\n      $diaperChangeModal.find('#diaperchange-wet').prop('checked', d.wet);\n      $diaperChangeModal.find('#diaperchange-wet').parent().toggleClass('active', d.wet);\n      $diaperChangeModal.find('#diaperchange-solid').prop('checked', d.solid);\n      $diaperChangeModal.find('#diaperchange-solid').parent().toggleClass('active', d.solid);\n      $diaperChangeModal.find('#diaperchange-color').val(d.color);\n      $diaperChangeModal.find('#diaperchange-save-btn').click(function(evt){\n        const diaperCopy = Object.assign({}, d);\n        diaperCopy.time = moment($diaperChangeModal.find('#diaperchange-time').val(), 'YYYY-MM-DD hh:mm a').toISOString();\n        diaperCopy.wet = $diaperChangeModal.find('#diaperchange-wet').prop('checked');\n        diaperCopy.solid = $diaperChangeModal.find('#diaperchange-solid').prop('checked');\n        diaperCopy.color = $diaperChangeModal.find('#diaperchange-color').val();\n        $.post(BabyBuddy.ApiRoutes.diaperChangeDetail(childId, diaperCopy.id), diaperCopy)\n          .then((response) => {\n            $diaperChangeModal.modal('hide');\n            self.fetchTimeline();\n            return response;\n          })\n          .catch(err => {\n            if (err.responseJSON && err.responseJSON.error_message) {\n              $diaperChangeModal.find('#error-message').html(err.responseJSON.error_message);\n            }\n          });\n      });\n    },\n    showFeedingModal: function(d) {\n      $feedingModal.modal('show');\n      const s = moment(d.start);\n      $feedingModal.find('#feeding-start').val(s.format('YYYY-MM-DD hh:mm a'));\n      $feedingModal.find('#feeding-datetimepicker_start').datetimepicker({\n        defaultDate: s,\n        format: 'YYYY-MM-DD hh:mm a'\n      });\n      $feedingModal.find('#feeding-end').val(moment(d.end).format('YYYY-MM-DD hh:mm a'));\n      $feedingModal.find('#feeding-datetimepicker_end').datetimepicker({\n        minDate: s.clone().add(1, 'minutes'),\n        format: 'YYYY-MM-DD hh:mm a'\n      });\n      $feedingModal.find('#feeding-datetimepicker_start').on('change.datetimepicker', function(evt){\n        $feedingModal.find('#feeding-datetimepicker_end').datetimepicker('minDate', moment(evt.date).add(1, 'minutes'));\n      });\n      const $type = $feedingModal.find('#feeding-type');\n      const $method = $feedingModal.find('#feeding-method');\n      const $amount = $feedingModal.find('#feeding-amount');\n      const $units = $feedingModal.find('#feeding-units');\n      $type.val(d.type);\n      $method.val(d.method);\n      $amount.val(d.amount);\n      $type.find('#feeding-end').change((evt) => {\n        if (!$type.val()) {\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', false);\n            $this.prop('selected', i === 0);\n          });\n        } else if ($type.val() !== 'breast milk') {\n          const breastOptions = ['left breast', 'right breast', 'both breasts'];\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', breastOptions.includes($this.prop('value')));\n            $this.prop('selected', $this.prop('value') === 'bottle');\n          });\n        } else {\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', false);\n            $this.prop('selected', i === 0);\n          });\n        }\n      });\n      $method.change(function(evt){\n        if ($method.val() === 'bottle') {\n          $amount.parent().show();\n          $units.parent().show();\n        } else {\n          $amount.parent().hide();\n          $units.parent().hide();\n        }\n      });\n\n      $feedingModal.find('#feeding-save-btn').click((evt) => {\n        const feedingCopy = Object.assign({}, d);\n        feedingCopy.start = moment($feedingModal.find('#feeding-start').val(), 'YYYY-MM-DD hh:mm a').toISOString();\n        feedingCopy.end = moment($feedingModal.find('#feeding-end').val(), 'YYYY-MM-DD hh:mm a').toISOString();\n        feedingCopy.type = $type.val();\n        feedingCopy.method = $method.val();\n        feedingCopy.units = $units.val();\n        feedingCopy.amount = $feedingModal.find('#feeding-amount').val();\n        if (feedingCopy.type !== 'breast milk' && !feedingCopy.amount) {\n          return;\n        }\n        $.post(BabyBuddy.ApiRoutes.feedingDetail(childId, feedingCopy.id), feedingCopy)\n          .then((response) => {\n            $feedingModal.modal('hide');\n            self.fetchTimeline();\n            return response;\n          })\n          .catch(err => {\n            if (err.responseJSON && err.responseJSON.error_message) {\n              $feedingModal.find('#error-message').html(err.responseJSON.error_message);\n            }\n          });\n      });\n    },\n    showSleepModal: function(d) {\n      $sleepModal.modal('show');\n      const s = moment(d.start);\n      $sleepModal.find('#sleep-start').val(s.format('YYYY-MM-DD hh:mm a'));\n      $sleepModal.find('#sleep-datetimepicker_start').datetimepicker({\n        defaultDate: s,\n        format: 'YYYY-MM-DD hh:mm a'\n      });\n      $sleepModal.find('#sleep-end').val(moment(d.end).format('YYYY-MM-DD hh:mm a'));\n      $sleepModal.find('#sleep-datetimepicker_end').datetimepicker({\n        minDate: s.clone().add(1, 'minutes'),\n        format: 'YYYY-MM-DD hh:mm a'\n      });\n      $sleepModal.find('#sleep-datetimepicker_start').on('change.datetimepicker', function(evt){\n        $sleepModal.find('#sleep-datetimepicker_end').datetimepicker('minDate', moment(evt.date).add(1, 'minutes'));\n      });\n\n      $sleepModal.find('#sleep-save-btn').click((evt) => {\n        const sleepCopy = Object.assign({}, d);\n        sleepCopy.start = moment($sleepModal.find('#sleep-start').val(), 'YYYY-MM-DD hh:mm a').toISOString();\n        sleepCopy.end = moment($sleepModal.find('#sleep-end').val(), 'YYYY-MM-DD hh:mm a').toISOString();\n        $.post(BabyBuddy.ApiRoutes.sleepingDetail(childId, sleepCopy.id), sleepCopy)\n          .then((response) => {\n            $sleepModal.modal('hide');\n            self.fetchTimeline();\n            return response;\n          })\n          .catch(err => {\n            if (err.responseJSON && err.responseJSON.error_message) {\n              $sleepModal.find('#error-message').html(err.responseJSON.error_message);\n            }\n          });\n      });\n    }\n  };\n\n  return ChildDetail;\n} (window);\n","\nBabyBuddy.DiaperChange = function() {\n  let $el;\n  let userId;\n  let childId;\n  let diaperChangeId;\n  let diaperChange;\n  let diaperChanges = [];\n  let $timePicker;\n  let $wet;\n  let $solid;\n  let $color;\n  let $tableBody;\n  let $saveBtn;\n  let $addBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let detailPickerInitialized = false;\n  let diaperChangeDao;\n  let diaperChangeChart;\n  let self;\n\n  const DiaperChange = {\n    init: (el, uId, cId, dId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      diaperChangeId = dId;\n      $wet = $el.find('#diaperchange-wet');\n      $solid = $el.find('#diaperchange-solid');\n      $color = $el.find('#diaperchange-color');\n      $saveBtn = $el.find('#diaperchange-save-btn');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#diaperchange-add-btn');\n      $addModal = $el.find('#diaperchange-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $timePicker = $el.find('#diaperchange-datetimepicker_time');\n      $startFilterPicker = $el.find('#diaperchange-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#diaperchange-filter-datetimepicker_end');\n      diaperChangeDao = BabyBuddy.ChildTimeActivityDao();\n      diaperChangeChart = BabyBuddy.DiaperChangeChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && diaperChangeId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.diaperChangeDetail(childId, diaperChangeId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!diaperChangeId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(7, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      let defaultTime = !_.isEmpty(diaperChange) && diaperChange.time ? moment(diaperChange.time) : moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD hh:mm a'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n\n      $wet.prop('checked', !_.isEmpty(diaperChange) && diaperChange.wet);\n      $solid.prop('checked', !_.isEmpty(diaperChange) && diaperChange.solid);\n      $wet.parent().toggleClass('active', !_.isEmpty(diaperChange) && diaperChange.wet);\n      $solid.parent().toggleClass('active', !_.isEmpty(diaperChange) && diaperChange.solid);\n      $color.val(!_.isEmpty(diaperChange) && diaperChange.color ? diaperChange.color : 'yellow');\n    },\n    syncTable: () => {\n      if (!_.isEmpty(diaperChanges)) {\n        $tableBody.empty();\n        let html = diaperChanges.map(change => {\n          const time = moment(change.time).format('YYYY-MM-DD hh:mm a');\n          const wetIconClasses = change.wet ? 'icon-true text-success' : 'icon-false text-danger';\n          const solidIconClasses = change.solid ? 'icon-true text-success' : 'icon-false text-danger';\n          return `\n            <tr>\n              <td class=\"text-center\">${time}</td>\n              <td class=\"text-center\">\n                <i class=\"icon ${wetIconClasses}\" aria-hidden=\"true\"></i>\n              </td>\n              <td class=\"text-center\">\n                <i class=\"icon ${solidIconClasses}\" aria-hidden=\"true\"></i>\n              </td>\n              <td class=\"text-center\">${_.capitalize(change.color)}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-change=\"${change.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-change=\"${change.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          diaperChangeId = parseInt($target.data('change'));\n          diaperChange = diaperChanges.find(c => c.id === diaperChangeId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          diaperChangeId = parseInt($target.data('change'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(diaperChange)) {\n          diaperChange = {};\n        }\n        diaperChange.child = childId;\n        diaperChange.time = $timePicker.datetimepicker('viewDate').toISOString();\n        diaperChange.wet = $wet.prop('checked');\n        diaperChange.solid = $solid.prop('checked');\n        diaperChange.color = $color.val();\n      }\n    },\n    isValidInputs: () => {\n      return $timePicker.datetimepicker('viewDate').isValid() && ($wet.prop('checked') || $solid.prop('checked')) && $color.val();\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.diaperChangeDetail(childId, diaperChangeId))\n        .then((response) => {\n          diaperChange = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.diaperChanges(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate');\n      const e = $endFilterPicker.datetimepicker('viewDate');\n      return diaperChangeDao.fetch(url, s.startOf('day'), e.endOf('day')).then(response => {\n        diaperChanges = response;\n        self.syncTable();\n        $(window).resize(() => {\n          diaperChangeChart.plot($el.find('#diaperchange-chart-container'), diaperChanges, s, e);\n        });\n        $(window).on('orientationchange', () => {\n          diaperChangeChart.plot($el.find('#diaperchange-chart-container'), diaperChanges, s, e);\n        });\n        diaperChangeChart.plot($el.find('#diaperchange-chart-container'), diaperChanges, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.diaperChanges(childId), diaperChange)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.diaperChangeDetail(childId, diaperChangeId), diaperChange)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      diaperChange = {};\n      diaperChangeId = null;\n      let defaultTime = moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD hh:mm a'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n      $wet.prop('checked', false);\n      $solid.prop('checked', false);\n      $wet.parent().toggleClass('active', false);\n      $solid.parent().toggleClass('active', false);\n      $color.val('yellow');\n    }\n  };\n\n  self = DiaperChange;\n  return self;\n}();\n","\nBabyBuddy.Feeding = function() {\n  let $el;\n  let userId;\n  let childId;\n  let feedingId;\n  let feeding;\n  let feedings = [];\n  let $startPicker;\n  let $endPicker;\n  let $type;\n  let $method;\n  let $units;\n  let $amount;\n  let $tableBody;\n  let $addBtn;\n  let $saveBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let detailPickerInitialized = false;\n  let feedingDao;\n  let feedingChart;\n  let self;\n\n  const Feeding = {\n    init: (el, uId, cId, fId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      feedingId = fId;\n      $startPicker = $el.find('#feeding-datetimepicker_start');\n      $endPicker = $el.find('#feeding-datetimepicker_end');\n      $type = $el.find('#feeding-type');\n      $method = $el.find('#feeding-method');\n      $units = $el.find('#feeding-units');\n      $amount = $el.find('#feeding-amount');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#feeding-add-btn');\n      $saveBtn = $el.find('#feeding-save-btn');\n      $addModal = $el.find('#feeding-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $startFilterPicker = $el.find('#feeding-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#feeding-filter-datetimepicker_end');\n      feedingDao = BabyBuddy.ChildDurationActivityDao();\n      feedingChart = BabyBuddy.FeedingChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && feedingId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.feedingDetail(childId, feedingId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $type.change((evt) => {\n        if (!$type.val()) {\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', false);\n            $this.prop('selected', i === 0);\n          });\n        } else if ($type.val() !== 'breast milk') {\n          const breastOptions = ['left breast', 'right breast', 'both breasts'];\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', breastOptions.includes($this.prop('value')));\n            $this.prop('selected', $this.prop('value') === 'bottle');\n          });\n        } else {\n          $method.find('option').each((i, el) => {\n            const $this = $(el);\n            $this.prop('disabled', false);\n            $this.prop('selected', i === 0);\n          });\n        }\n      });\n      $method.change(function(evt){\n        if ($method.val() === 'bottle') {\n          $amount.parent().show();\n          $units.parent().show();\n        } else {\n          $amount.val(0);\n          $amount.parent().hide();\n          $units.parent().hide();\n        }\n      });\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!feedingId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(7, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      const hasFeeding = !_.isEmpty(feeding);\n      const startDefault = hasFeeding && feeding.start ? moment(feeding.start) : moment().subtract(10, 'minutes');\n      const endDefault = hasFeeding && feeding.end ? moment(feeding.end) : moment();\n      $type.val(hasFeeding && feeding.type ? feeding.type : '');\n      $method.val(hasFeeding && feeding.method ? feeding.method : '');\n      $amount.val(hasFeeding && feeding.amount ? feeding.amount : '');\n      $units.val(hasFeeding && feeding.units ? feeding.units : 'ounces');\n      \n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n    },\n    syncTable: () => {\n      if (!_.isEmpty(feedings)) {\n        $tableBody.empty();\n        let html = feedings.map(f => {\n          const ended = moment(f.end).format('YYYY-MM-DD hh:mm a');\n          let duration = moment.duration(f.duration);\n          let durationStr = '';\n          if (duration.hours()) {\n            if (duration.minutes()) {\n              durationStr = `${duration.hours()} hrs ${duration.minutes()} mins`;\n            } else {\n              durationStr = `${duration.hours()} hrs`;\n            }\n          } else if (duration.minutes()) {\n            durationStr = `${duration.minutes()} mins`;\n          }\n\n          const amount = f.amount ? `${f.amount} ${f.units === 'ounces' ? 'oz' : 'ml'}` : '';\n          return `\n            <tr>\n              <td class=\"text-center\">${_.capitalize(f.method)}</td>\n              <td class=\"text-center\">${_.capitalize(f.type)}</td>\n              <td class=\"text-center\">${amount}</td>\n              <td class=\"text-center\">${durationStr}</td>\n              <td class=\"text-center\">${ended}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-feeding=\"${f.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-feeding=\"${f.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          feedingId = parseInt($target.data('feeding'));\n          feeding = feedings.find(c => c.id === feedingId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          feedingId = parseInt($target.data('feeding'));\n          $deleteModal.modal('show');\n        });\n\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(feeding)) {\n          feeding = {};\n        }\n        feeding.child = childId;\n        feeding.start = $startPicker.datetimepicker('viewDate').toISOString();\n        feeding.end = $endPicker.datetimepicker('viewDate').toISOString();\n        feeding.type = $type.val();\n        feeding.units = $units.val();\n        feeding.method = $method.val();\n        feeding.amount = $amount.val();\n      }\n    },\n    isValidInputs: () => {\n      const s = $startPicker.datetimepicker('viewDate');\n      const e = $endPicker.datetimepicker('viewDate');\n      let datesValid = s.isValid() && e.isValid();\n      if (datesValid) {\n        datesValid = s.isSame(e) || s.isBefore(e);\n      }\n\n      if (!datesValid || !$type.val() || !$method.val()) {\n        return false;\n      }\n\n      if ($method.val() === 'bottle') {\n        try {\n          const amt = parseFloat($amount.val());\n          if (amt <= 0) {\n            return false;\n          }\n        } catch (err) {\n          return false;\n        }\n      } else if (!['left breast', 'right breast', 'both breasts'].includes($method.val())) {\n        return false;\n      }\n\n      return true;\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.feedingDetail(childId, feedingId))\n        .then((response) => {\n          feeding = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.feedings(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate').startOf('day');\n      const e = $endFilterPicker.datetimepicker('viewDate').endOf('day');\n      return feedingDao.fetch(url, s, e).then(response => {\n        feedings = response;\n        self.syncTable();\n        const $chartContainer = $el.find('#feeding-container');\n        $(window).resize(() => {\n          feedingChart.plot($chartContainer, feedings, s, e);\n        });\n        $(window).on('orientationchange', () => {\n          feedingChart.plot($chartContainer, feedings, s, e);\n        });\n        feedingChart.plot($chartContainer, feedings, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.feedings(childId), feeding)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.feedingDetail(childId, feedingId), feeding)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      feeding = {};\n      feedingId = null;\n      $type.val('');\n      $method.val('');\n      $amount.val('');\n\n      const startDefault = moment().subtract(10, 'minutes');\n      const endDefault = moment();\n      \n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n    }\n  };\n\n  self = Feeding;\n  return self;\n}();\n","\nBabyBuddy.Note = function() {\n  let $el;\n  let userId;\n  let childId;\n  let noteId;\n  let note;\n  let notes = [];\n  let $note;\n  let $tableBody;\n  let $saveBtn;\n  let $addBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let noteDao;\n  let self;\n\n  const Note = {\n    init: (el, uId, cId, nId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      noteId = nId;\n      $note = $el.find('#note');\n      $saveBtn = $el.find('#note-save-btn');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#note-add-btn');\n      $addModal = $el.find('#note-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $startFilterPicker = $el.find('#note-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#note-filter-datetimepicker_end');\n      noteDao = BabyBuddy.ChildTimeActivityDao();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && noteId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.noteDetail(childId, noteId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!noteId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(7, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      self.syncInputs();\n      $addModal.modal('show');\n    },\n    syncInputs: () => {\n      if (!_.isEmpty(note)) {\n        $note.val(note.note);\n      }\n    },\n    syncTable: () => {\n      if (!_.isEmpty(notes)) {\n        $tableBody.empty();\n        let html = notes.map(n => {\n          const time = moment(n.time).format('YYYY-MM-DD hh:mm a');\n          return `\n            <tr>\n              <td colspan=\"4\">${n.note}</td>\n              <td class=\"text-center\">${time}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-note=\"${n.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-note=\"${n.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          noteId = parseInt($target.data('note'));\n          note = notes.find(n => n.id === noteId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          noteId = parseInt($target.data('note'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(note)) {\n          note = {};\n        }\n        note.child = childId;\n        note.note = $note.val();\n      }\n    },\n    isValidInputs: () => {\n      return $note.val();\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.noteDetail(childId, noteId))\n        .then((response) => {\n          note = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.notes(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate');\n      const e = $endFilterPicker.datetimepicker('viewDate');\n      return noteDao.fetch(url, s.startOf('day'), e.endOf('day')).then(response => {\n        notes = response;\n        self.syncTable();\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.notes(childId), note)\n        .then((response) => {\n          self.clear();\n          $addModal.modal('hide');\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.noteDetail(childId, noteId), note)\n        .then((response) => {\n          self.clear();\n          $addModal.modal('hide');\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      note = {};\n      noteId = null;\n      $note.val('');\n    }\n  };\n  self = Note;\n  return self;\n}();\n\n","\nBabyBuddy.Notification = function (root) {\n  var $ = root.jQuery;\n  var _ = root._;\n  // var DurationFormHandler = root.BabyBuddy.DurationFormHandler;\n  var runIntervalId = null,\n      notificationId = null,\n      $el = null,\n      $childrenSelect = null,\n      $accountSelect = null,\n      $frequencyInHours = null,\n      $intervals = null,\n      $start = null,\n      $end = null,\n      $days = null,\n      $hours = null,\n      $minutes = null,\n      $timerStatus = null,\n      $notificationForm = null,\n      lastUpdate = moment(),\n      hidden = null,\n      children = [],\n      accounts = [],\n      notification = {},\n      self = null;\n\n  var Notification = {\n      init: function(id, el) {\n          notificationId = id;\n          $el = $('#' + el);\n          $childrenSelect = $el.find('#id_child');\n          $accountSelect = $el.find('#id_account');\n          $frequencyInHours = $el.find('#id_frequency_hours');\n          $hours = $el.find('#notification-hours');\n          $minutes = $el.find('#notification-minutes');\n          $intervals = $el.find('#id_intervals');\n          $start = $el.find('#datetimepicker_start');\n          $end = $el.find('#datetimepicker_end');\n          $timerStatus = $el.find('#timer-status');\n          $notificationForm = $el.find('#notification-form');\n          self = this;\n\n          var initialDate = $start.find('input').val() ? $start.find('input').val() : moment().format('YYYY-MM-DD hh:mm a');\n          $start.find('input').val(initialDate);\n\n          $start.datetimepicker({\n            format: 'YYYY-MM-DD hh:mm a',\n            startDate: initialDate\n          });\n          $end.datetimepicker({\n            format: 'YYYY-MM-DD HH:mm',\n            onShow: function(ct) {\n              var minDate = self.getMinEndDate();\n              minDate = minDate.format('YYYY-MM-DD hh:mm a');\n              this.setOptions({\n                minDate: minDate\n              })\n            }\n          });\n\n          $start.change(_.debounce(function(evt){\n            console.log('start date changed', evt);\n            self.updateEndDate();\n          }, 600));\n\n          $end.change(_.debounce(function(evt){\n            console.log('end date changed', evt);\n            // validate end date\n\n          }, 1200));\n\n          // DurationFormHandler($notificationForm, $start, $end);\n\n          $frequencyInHours.change(_.debounce(function(evt){\n            self.updateEndDate();\n          }, 600));\n\n          $intervals.change(_.debounce(function(evt){\n            self.updateEndDate();\n          }, 600));\n\n          if (notificationId) {\n            this.fetchNotification()\n            .then(function(response){\n              if (notification.active) {\n                self.run();\n              } else {\n                $el.find('input').each(function(){\n                  $(this).attr('disabled', true);\n                });\n                $el.find('select').each(function(){\n                  $(this).attr('disabled', true);\n                });\n                $el.find('textarea').each(function(){\n                  $(this).attr('disabled', true);\n                });\n              }\n            });\n          }\n\n          this.fetchAccounts();\n          this.fetchChildren();\n\n          $childrenSelect.change(function(evt){\n            var selectedChildId = $(evt.currentTarget).val();\n            var selectedAcct = accounts.find(function(a){\n              return a.id == selectedChildId;\n            });\n            if (selectedAcct && notification.hasOwnProperty('account')) {\n              notification.account = selectedAcct.id;\n            }\n            $accountSelect.val(selectedChildId);\n            // self.save();\n          });\n\n          $accountSelect.change(function(evt){\n            var selectedAcctId = $(evt.currentTarget).val();\n            self.fillChildOptions(children.filter(function(c){\n              return c.account == selectedAcctId;\n            }));\n            // self.save();\n          });\n\n          window.addEventListener('beforeunload', function(){\n            // self.save();\n          });\n\n          self.updateEndDate();\n      },\n      getMinEndDate: function() {\n        var hrs = 0;\n        var intervals = 1;\n        var startDT = $start.find('input').val() ? moment($start.find('input').val()) : moment();\n\n        try {\n          hrs = parseInt($frequencyInHours.val());\n        } catch(err) {\n          console.log(err);\n        }\n\n        try {\n          intervals = parseInt($intervals.val());\n        } catch(err) {\n          console.log(err);\n        }\n\n        try {\n          var endDT = startDT.clone().add((hrs * intervals), 'hours');\n          return endDT;\n        } catch(err) {\n          console.log(err);\n        }\n        \n        return moment();\n      },\n      updateEndDate: function () {\n        var endDT = self.getMinEndDate();\n        $end.find('input').val(endDT.format('YYYY-MM-DD hh:mm a'));\n      },\n\n      fillChildOptions: function(availableChildren) {\n        $childrenSelect.empty();\n        var options = availableChildren.map(function(c){\n          var selected = notification.child == c.id ? 'selected' : '';\n          var name = c.first_name + ' ' + c.last_name;\n          return '<option value=\"' + c.id + '\" ' + selected + '>' + name + '</option>';\n        });\n        options.unshift('<option disabled>Children</option>');\n        $childrenSelect.html(options.join('\\n'));\n      },\n\n      run: function() {\n        if ($el.length == 0) {\n          console.error('Notification element not found.');\n          return false;\n        }\n\n        if ($hours.length == 0 || $minutes.length == 0) {\n            console.error('Element does not contain expected children.');\n            return false;\n        }\n\n        $timerStatus.removeClass('timer-stopped');\n\n        if (runIntervalId) {\n          clearInterval(runIntervalId);\n        }\n        runIntervalId = setInterval(this.tick, 1000);\n\n        // If the page just came in to view, update the timer data with the\n        // current actual duration. This will (potentially) help mobile\n        // phones that lock with the timer page open.\n        if (typeof document.hidden !== \"undefined\") {\n          hidden = \"hidden\";\n        } else if (typeof document.msHidden !== \"undefined\") {\n          hidden = \"msHidden\";\n        } else if (typeof document.webkitHidden !== \"undefined\") {\n          hidden = \"webkitHidden\";\n        }\n        window.addEventListener('focus', Notification.handleVisibilityChange, false);\n      },\n\n      handleVisibilityChange: function() {\n        if (!document[hidden] && moment().diff(lastUpdate) > 20000) {\n          self.updateNotificationDisplay();\n        }\n      },\n\n      tick: function() {\n        var duration = self.timeUntilNextNotificationEvent();\n        // $days.text(duration.days());\n        $hours.text(duration.hours());\n        $minutes.text(duration.minutes());\n      },\n\n      updateNotificationDisplay: function() {\n        if (notification && notification.frequency_hours) {\n          clearInterval(runIntervalId);\n          var duration = self.timeUntilNextNotificationEvent();\n          // $days.text(duration.days());\n          $hours.text(duration.hours());\n          $minutes.text(duration.minutes());\n          lastUpdate = moment();\n\n          if (notification.active) {\n            // update every 10 seconds\n            runIntervalId = setInterval(Notification.tick, 10000);\n            $timerStatus.removeClass('timer-stopped');\n          } else {\n            $timerStatus.addClass('timer-stopped');\n          }\n        }\n      },\n      fetchNotification: function() {\n        return $.get(BabyBuddy.ApiRoutes.notification(notificationId))\n          .then(function(response){\n            notification = response;\n            return response;\n          });\n      },\n      fetchAccounts: function() {\n        return $.get(BabyBuddy.ApiRoutes.accounts())\n          .then(function(response){\n            accounts = response;\n            return response;\n          });\n      },\n      fetchChildren: function() {\n        return $.get(BabyBuddy.ApiRoutes.children())\n          .then(function(response){\n            children = response;\n            return response;\n          });\n      },\n      save: function() {\n        // return $.post('/api/timers/' + timerId + '/', timer)\n        //   .then(function(response){\n        //     console.log('saved timer', response);\n        //     timer = response;\n        //     return response;\n        //   });\n      },\n      timeUntilNextNotificationEvent: function() {\n          var now = moment();\n          if (_.isEmpty(notification) || !notification.active || now.isAfter(notification.end)) {\n            return moment.duration(0, 'hours');\n          }\n\n          var secsSinceStart = moment.duration(now.diff(notification.start)).as('seconds');\n          var freqInSecs = notification.frequency_hours * 60 * 60;\n          var secsUntilNext = freqInSecs;\n          if (freqInSecs > secsSinceStart) {\n            secsUntilNext = freqInSecs - secsSinceStart;\n          } else {\n            var r = secsSinceStart % freqInSecs;\n            if (r !== 0) {\n              secsUntilNext = Math.round(freqInSecs - r);\n            }\n          }\n          var durationUntilNext = moment.duration(secsUntilNext, 'seconds');\n          return durationUntilNext;\n      }\n  };\n\n  return Notification;\n}(window);\n","\nBabyBuddy.Sleep = function() {\n  let $el;\n  let userId;\n  let childId;\n  let sleepId;\n  let sleep;\n  let sleeps = [];\n  let $startPicker;\n  let $endPicker;\n  let $tableBody;\n  let $addBtn;\n  let $saveBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let sleepDao;\n  let sleepChart;\n  let detailPickerInitialized = false;\n  let self;\n\n  const Sleep = {\n    init: (el, uId, cId, sId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      sleepId = sId;\n      $startPicker = $el.find('#sleep-datetimepicker_start');\n      $endPicker = $el.find('#sleep-datetimepicker_end');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#sleep-add-btn');\n      $saveBtn = $el.find('#sleep-save-btn');\n      $addModal = $el.find('#sleep-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $startFilterPicker = $el.find('#sleep-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#sleep-filter-datetimepicker_end');\n      sleepDao = BabyBuddy.ChildDurationActivityDao();\n      sleepChart = BabyBuddy.SleepChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && sleepId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.sleepingDetail(childId, sleepId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!sleepId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(7, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      const hasSleep = !_.isEmpty(sleep);\n      const startDefault = hasSleep && sleep.start ? moment(sleep.start) : moment().subtract(2, 'minutes');\n      const endDefault = hasSleep && sleep.end ? moment(sleep.end) : moment();\n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n    },\n    syncTable: () => {\n      if (!_.isEmpty(sleeps)){\n        $tableBody.empty();\n        let html = sleeps.map(s => {\n          const start = moment(s.start).format('YYYY-MM-DD hh:mm a');\n          const end = moment(s.end).format('YYYY-MM-DD hh:mm a');\n          let duration = moment.duration(s.duration);\n          let durationStr = '';\n          if (duration.hours()) {\n            if (duration.minutes()) {\n              durationStr = `${duration.hours()} hrs ${duration.minutes()} mins`;\n            } else {\n              durationStr = `${duration.hours()} hrs`;\n            }\n          } else if (duration.minutes()) {\n            durationStr = `${duration.minutes()} mins`;\n          }\n          const napIconClasses = s.nap ? 'icon-true text-success' : 'icon-false text-danger';\n          return `\n            <tr>\n              <td class=\"text-center\">${start}</td>\n              <td class=\"text-center\">${end}</td>\n              <td class=\"text-center\">${durationStr}</td>\n              <td class=\"text-center\">\n                <i class=\"icon ${napIconClasses}\" aria-hidden=\"true\"></i>\n              </td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-sleep=\"${s.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-sleep=\"${s.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          sleepId = parseInt($target.data('sleep'));\n          sleep = sleeps.find(c => c.id === sleepId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          sleepId = parseInt($target.data('sleep'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(sleep)) {\n          sleep = {};\n        }\n        sleep.child = childId;\n        sleep.start = $startPicker.datetimepicker('viewDate').toISOString();\n        sleep.end = $endPicker.datetimepicker('viewDate').toISOString();\n      }\n    },\n    isValidInputs: () => {\n      const s = $startPicker.datetimepicker('viewDate');\n      const e = $endPicker.datetimepicker('viewDate');\n      let datesValid = s.isValid() && e.isValid();\n      if (datesValid) {\n        datesValid = s.isBefore(e);\n      }\n\n      return datesValid;\n    },\n    fetch: () => {\n      $.get(BabyBuddy.ApiRoutes.sleeping(childId, sleepId))\n        .then((response) => {\n          sleep = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.sleeping(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate').startOf('day');\n      const e = $endFilterPicker.datetimepicker('viewDate').endOf('day');\n      return sleepDao.fetch(url, s, e).then(response => {\n        sleeps = response;\n        self.syncTable();\n        const $chartContainer = $el.find('#sleep-container');\n        $(window).resize(() => {\n          sleepChart.plot($chartContainer, sleeps, s, e);\n        });\n        $(window).on('orientationchange', () => {\n          sleepChart.plot($chartContainer, sleeps, s, e);\n        });\n        sleepChart.plot($chartContainer, sleeps, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      $.post(BabyBuddy.ApiRoutes.sleeping(childId), sleep)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      $.post(BabyBuddy.ApiRoutes.sleepingDetail(childId, sleepId), sleep)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      sleepId = null;\n      sleep = {};\n      const startDefault = moment().subtract(2, 'minutes');\n      const endDefault = moment();\n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n    }\n  };\n\n  self = Sleep;\n  return self;\n}();\n\n","\nBabyBuddy.Temperature = function() {\n  let $el;\n  let userId;\n  let childId;\n  let temperatureId;\n  let temperature;\n  let temperatures = [];\n  let $timePicker;\n  let $temperature;\n  let $tableBody;\n  let $addBtn;\n  let $saveBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let detailPickerInitialized = false;\n  let temperatureDao;\n  let temperatureChart;\n  let self;\n\n  const Temperature = {\n    init: (el, uId, cId, tId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      temperatureId = tId;\n      $temperature = $el.find('#temperature');\n      $saveBtn = $el.find('#temperature-save-btn');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#temperature-add-btn');\n      $addModal = $el.find('#temperature-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $timePicker = $el.find('#temperature-datetimepicker_time');\n      $startFilterPicker = $el.find('#temperature-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#temperature-filter-datetimepicker_end');\n      temperatureDao = BabyBuddy.ChildTimeActivityDao();\n      // temperatureChart = BabyBuddy.TemperatureChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && temperatureId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.temperatureDetail(childId, temperatureId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!temperatureId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(90, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      let defaultTime = !_.isEmpty(temperature) && temperature.time ? moment(temperature.time) : moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD hh:mm a'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n\n      $temperature.val(!_.isEmpty(temperature) ? temperature.temperature : '');\n    },\n    syncTable: () => {\n      if (!_.isEmpty(temperatures)) {\n        $tableBody.empty();\n        let html = temperatures.map(t => {\n          const time = moment(t.time).format('YYYY-MM-DD hh:mm a');\n          const temp = t.temperature || '';\n          return `\n            <tr>\n              <td class=\"text-center\">${temp}</td>\n              <td class=\"text-center\">${time}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-temperature=\"${t.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-temperature=\"${t.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          temperatureId = parseInt($target.data('temperature'));\n          temperature = temperatures.find(t => t.id === temperatureId);\n          self.syncInputs();\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          temperatureId = parseInt($target.data('temperature'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(temperature)) {\n          temperature = {};\n        }\n        temperature.child = childId;\n        temperature.time = $timePicker.datetimepicker('viewDate').toISOString();\n        temperature.temperature = $temperature.val();\n      }\n    },\n    isValidInputs: () => {\n      if (!$temperature.val()) {\n        return false;\n      }\n      try {\n        const temp = parseFloat($temperature.val());\n        if (temp <= 20 || temp > 110) {\n          return false;\n        }\n      } catch(err) {\n        return false;\n      }\n      return $timePicker.datetimepicker('viewDate').isValid();\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.temperatureDetail(childId, temperatureId))\n        .then((response) => {\n          temperature = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.temperatures(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate');\n      const e = $endFilterPicker.datetimepicker('viewDate');\n      return temperatureDao.fetch(url, s.startOf('day'), e.endOf('day')).then(response => {\n        temperatures = response;\n        self.syncTable();\n        // $(window).resize(() => {\n        //   temperatureChart.plot($el.find('#temperature-chart'), $el.find('#temperature-chart-container'), temperatures, s, e);\n        // });\n        // temperatureChart.plot($el.find('#temperature-chart'), $el.find('#temperature-chart-container'), temperatures, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.temperatures(childId), temperature)\n        .then((response) => {\n          temperature = response;\n          temperatureId = response.id;\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        }).catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.temperatureDetail(childId, temperatureId), temperature)\n        .then((response) => {\n          temperature = response;\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        }).catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      temperature = {};\n      temperatureId = null;\n      const defaultTime = moment();\n      if (!detailPickerInitialized) {\n        $timePicker.datetimepicker({\n          defaultDate: defaultTime,\n          format: 'YYYY-MM-DD hh:mm a'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $timePicker.datetimepicker('date', defaultTime);\n      }\n    }\n  };\n\n  self = Temperature;\n  return self;\n}();\n","\nBabyBuddy.Timers = function() {\n  let $el;\n  let userId;\n  let $tableBody;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let timers = [];\n  let timerDao;\n\n  let self;\n\n  const Timers = {\n    init: (el, uId) => {\n      $el = $(el);\n      userId = uId;\n      timerDao = BabyBuddy.ChildTimeActivityDao('created');\n      $tableBody = $el.find('tbody');\n      $startFilterPicker = $el.find('#timer-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#timer-filter-datetimepicker_end');\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(7, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    makeDuration: (duration) => {\n      let durationDisplay = '';\n      if (duration.hours()) {\n        if (duration.minutes()) {\n          durationDisplay = `${duration.hours()} hrs, ${duration.minutes()} mins`;\n        } else {\n          durationDisplay = `${duration.hours()} hrs`;\n        }\n      } else if (duration.minutes()) {\n        durationDisplay = `${duration.minutes()} mins`;\n      }\n      return durationDisplay;\n    },\n    syncTable: () => {\n      if (!_.isEmpty(timers)) {\n        $tableBody.empty();\n        let html = timers.map(t => {\n          const start = moment(t.created).format('YYYY-MM-DD hh:mm a');\n          const end = t.end ? moment(t.end).format('YYYY-MM-DD hh:mm a') : '';\n          let duration = moment.duration(t.duration);\n          let durationStr = self.makeDuration(duration);\n          let status;\n          if (t.active) {\n            status = 'Active';\n          } else if (!t.complete) {\n            status = 'Paused';\n          } else {\n            status = 'Complete';\n          }\n          return `\n            <tr>\n              <th scope=\"row\">\n                <a href=\"/timer/${t.id}/\">${t.name}</a>\n              </th>\n              <td class=\"text-center\">${status}</td>\n              <td class=\"text-center\">${durationStr}</td>\n              <td class=\"text-center\">${end}</td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n      }\n    },\n\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.timers();\n      const s = $startFilterPicker.datetimepicker('viewDate').startOf('day');\n      const e = $endFilterPicker.datetimepicker('viewDate').clone().add(1, 'days').endOf('day');\n      return timerDao.fetch(url, s, e).then(response => {\n        timers = response;\n        self.syncTable();\n        return response;\n      });\n    }\n  };\n\n  self = Timers;\n  return self;\n}();\n","\nBabyBuddy.TimerDetail = function (root) {\n    var $ = root.$;\n    var _ = root._;\n    var runIntervalId = null,\n        timerId = null,\n        userId = null,\n        $el = null,\n        $errorModal = null,\n        $childrenSelect = null,\n        $accountSelect = null,\n        $feedingCard = null,\n        $sleepCard = null,\n        $tummytimeCard = null,\n        $startBtn = null,\n        $pauseBtn = null,\n        $endBtn = null,\n        $name = null,\n        $hours = null,\n        $minutes = null,\n        $seconds = null,\n        $timerStatus = null,\n        $timerStatusMsg = null,\n        $feedingModal = null,\n        $startFeedingPicker = null,\n        $endFeedingPicker = null,\n        debounceTimer = null,\n        lastUpdate = moment(),\n        periodicUpdateIntervalId = null,\n        duration = null,\n        hidden = null,\n        children = [],\n        accounts = [],\n        timer = null,\n        self = null;\n\n    var TimerDetail = {\n        init: function(id, user, el) {\n            timerId = id;\n            userId = user;\n            $el = $('#' + el);\n            $errorModal = $el.find('#timer-msg-modal');\n            $name = $el.find('#name');\n            $childrenSelect = $el.find('#child');\n            $accountSelect = $el.find('#account');\n            $feedingCard = $el.find('#card-feeding');\n            $sleepCard = $el.find('#card-sleep');\n            $tummytimeCard = $el.find('#card-tummytime');\n            $startBtn = $el.find('#start-timer');\n            $pauseBtn = $el.find('#pause-timer');\n            $endBtn = $el.find('#end-timer');\n            $hours = $el.find('#timer-hours');\n            $minutes = $el.find('#timer-minutes');\n            $seconds = $el.find('#timer-seconds');\n            $timerStatus = $el.find('#timer-status');\n            $timerStatusMsg = $el.find('#timer-status-message');\n            $feedingModal = $el.find('#feeding-modal');\n            self = this;\n\n            if (timerId) {\n              this.fetchTimer()\n              .then((response) => {\n                if (!_.isEmpty(timer) && timer.active) {\n                  self.run();\n                  $startBtn.hide();\n                  $pauseBtn.show();\n                } else {\n                  $startBtn.show();\n                  $pauseBtn.hide();\n                }\n              });\n            } else {\n              $endBtn.hide();\n              $pauseBtn.hide();\n            }\n\n            $startBtn.click((evt) => {\n              evt.preventDefault();\n              if (_.isEmpty(timer) || !timerId) {\n                self.createTimer().catch((err) => {\n                  $errorModal.find('#modal-error-message').html(\n                    'Your monthly allocation of timers as been reached. Please upgrade your account to gain access to additional timers.'\n                  );\n                  $errorModal.modal('show');\n                });\n              } else {\n                timer.active = true;\n                self.save().then((response) => {\n                  self.run();\n                  $startBtn.hide();\n                  $pauseBtn.show();\n                }).catch((err) => {\n                  $errorModal.find('#modal-error-message').html(\n                    'Your monthly allocation of timers as been reached. Please upgrade your account to gain access to additional timers.'\n                  );\n                  $errorModal.modal('show');\n                });\n              }\n            });\n            $pauseBtn.click((evt) => {\n              evt.preventDefault();\n              timer.active = false;\n              self.save().then((response) => {\n                self.updateTimerDisplay();\n                $startBtn.show();\n                $pauseBtn.hide();\n              });\n            });\n            $endBtn.click((evt) => {\n              evt.preventDefault();\n              timer.active = false;\n              timer.complete = true;\n              self.save().then(response => {\n                if (response.is_feeding) {\n                  $feedingModal.modal('show');\n                  const feedingDuration = moment.duration(response.duration);\n                  const feedingEnd = moment();\n                  const feedingStart = feedingEnd.clone().subtract(feedingDuration);\n                  const $feedingStart = $feedingModal.find('#feeding-datetimepicker_start');\n                  const $feedingEnd = $feedingModal.find('#feeding-datetimepicker_end');\n                  $feedingStart.datetimepicker({\n                    defaultDate: feedingStart,\n                    format: 'YYYY-MM-DD hh:mm a'\n                  });\n                  $feedingEnd.datetimepicker({\n                    defaultDate: feedingEnd,\n                    format: 'YYYY-MM-DD hh:mm a'\n                  });\n                  const $units = $feedingModal.find('#feeding-units');\n                  const $type = $feedingModal.find('#feeding-type');\n                  const $method = $feedingModal.find('#feeding-method');\n                  const $amount = $feedingModal.find('#feeding-amount');\n                  $type.change((evt) => {\n                    if (!$type.val()) {\n                      $method.find('option').each((i, el) => {\n                        const $this = $(el);\n                        $this.prop('disabled', false);\n                        $this.prop('selected', i === 0);\n                      });\n                    } else if ($type.val() !== 'breast milk') {\n                      const breastOptions = ['left breast', 'right breast', 'both breasts'];\n                      $method.find('option').each((i, el) => {\n                        const $this = $(el);\n                        $this.prop('disabled', breastOptions.includes($this.prop('value')));\n                        $this.prop('selected', $this.prop('value') === 'bottle');\n                      });\n                    } else {\n                      $method.find('option').each((i, el) => {\n                        const $this = $(el);\n                        $this.prop('disabled', false);\n                        $this.prop('selected', i === 0);\n                      });\n                    }\n                  });\n                  $method.change(function(evt){\n                    if ($method.val() === 'bottle') {\n                      $amount.parent().show();\n                      $units.parent().show();\n                    } else {\n                      $amount.parent().hide();\n                      $units.parent().hide();\n                    }\n                  });\n                  $feedingModal.find('#feeding-save-btn').click(e => {\n                    const feeding = {\n                      child: response.child,\n                      start: $feedingStart.datetimepicker('viewDate').toISOString(),\n                      end: $feedingEnd.datetimepicker('viewDate').toISOString(),\n                      type: $type.val(),\n                      method: $method.val(),\n                      amount: $amount.val(),\n                      units: $units.val()\n                    };\n                    if (feeding.method === 'bottle' && !feeding.amount) {\n                      return;\n                    }\n                    $.post(BabyBuddy.ApiRoutes.feedings(feeding.child), feeding)\n                      .then((response) => {\n                        root.location.href = $endBtn.prop('href');\n                        return response;\n                      });\n                  });\n                } else {\n                  root.location.href = $endBtn.prop('href');\n                }\n              });\n            });\n\n            $name.change(_.debounce((evt) => {\n              if (!_.isEmpty(timer) && timer.name !== $name.val()) {\n                timer.name = $name.val();\n                self.save();\n              }\n            }, 800));\n\n            $childrenSelect.change((evt) => {\n              if (!_.isEmpty(timer)) {\n                timer.child = $childrenSelect.val();\n                const selectedAcct = accounts.find((a) => a.id == timer.child);\n                if (selectedAcct) {\n                  timer.account = selectedAcct.id;\n                }\n                $accountSelect.val(timer.account);\n                $accountSelect.change();\n                self.save();\n              }\n            });\n\n            $accountSelect.change((evt) => {\n              if (!_.isEmpty(timer)) {\n                timer.account = $accountSelect.val();\n                self.fillChildOptions(children.filter((c) => c.account == timer.account));\n                self.save();\n              } else {\n                self.fillChildOptions(children);\n              }\n            });\n\n            $feedingCard.click((evt) => {\n              evt.preventDefault();\n              $feedingCard.toggleClass('card-active');\n              $sleepCard.removeClass('card-active');\n              $tummytimeCard.removeClass('card-active');\n              if (!_.isEmpty(timer)) {\n                self.save();  \n              }\n            });\n\n            $sleepCard.click((evt) => {\n              evt.preventDefault();\n              $sleepCard.toggleClass('card-active');\n              $feedingCard.removeClass('card-active');\n              $tummytimeCard.removeClass('card-active');\n              if (!_.isEmpty(timer)) {\n                self.save();  \n              }\n            });\n\n            $tummytimeCard.click((evt) => {\n              evt.preventDefault();\n              $tummytimeCard.toggleClass('card-active');\n              $feedingCard.removeClass('card-active');\n              $sleepCard.removeClass('card-active');\n              if (!_.isEmpty(timer)) {\n                self.save();  \n              }\n            });\n\n            this.fetchChildren().then((response) => {\n              return self.fetchAccounts();\n            })\n\n            $(window).on('beforeunload', () => {\n              if (!_.isEmpty(timer)) {\n                self.save();\n              }\n              clearInterval(periodicUpdateIntervalId);\n              clearInterval(runIntervalId);\n            });\n        },\n\n        fillChildOptions: function(availableChildren) {\n          $childrenSelect.empty();\n          var options = availableChildren.map((c) => {\n            var selected = !_.isEmpty(timer) && timer.child == c.id ? 'selected' : '';\n            var name = c.first_name + ' ' + c.last_name;\n            return '<option value=\"' + c.id + '\" ' + selected + '>' + name + '</option>';\n          });\n          options.unshift('<option disabled>Children</option>');\n          $childrenSelect.html(options.join('\\n'));\n          if (availableChildren.length === 1) {\n            var child = availableChildren[0];\n            $childrenSelect.val(child.id);\n          }\n        },\n\n        run: function() {\n          if ($el.length == 0) {\n            console.error('BBTimer: Timer element not found.');\n            return false;\n          }\n\n          if ($seconds.length == 0\n              || $minutes.length == 0\n              || $hours.length == 0) {\n              console.error('Timer element does not contain expected children.');\n              return false;\n          }\n\n          $timerStatus.removeClass('timer-stopped');\n\n          if (runIntervalId) {\n            clearInterval(runIntervalId);\n          }\n          runIntervalId = setInterval(self.tick, 1000);\n\n          if (periodicUpdateIntervalId) {\n            clearInterval(periodicUpdateIntervalId);\n          }\n          periodicUpdateIntervalId = setInterval(self.fetchTimer, 5000);\n\n          // If the page just came in to view, update the timer data with the\n          // current actual duration. This will (potentially) help mobile\n          // phones that lock with the timer page open.\n          if (typeof document.hidden !== \"undefined\") {\n            hidden = \"hidden\";\n          } else if (typeof document.msHidden !== \"undefined\") {\n            hidden = \"msHidden\";\n          } else if (typeof document.webkitHidden !== \"undefined\") {\n            hidden = \"webkitHidden\";\n          }\n          window.addEventListener('focus', self.handleVisibilityChange, false);\n        },\n\n        handleVisibilityChange: function() {\n          if (!document[hidden] || moment().diff(lastUpdate) > 5000) {\n            self.updateTimerDisplay();\n          }\n        },\n\n        tick: function() {\n          if (duration && !_.isEmpty(timer) && timer.active) {\n            duration.add(1, 'seconds');\n            $seconds.text(duration.seconds());\n            $minutes.text(duration.minutes());\n            $hours.text((duration.days() * 24) + duration.hours());\n          }\n        },\n        updateTimerDisplay: function() {\n          if (!_.isEmpty(timer)) {\n            self.save().then((response) => {\n              if (!_.isEmpty(timer) && timer.duration) {\n                self.syncUI();\n              }\n            });\n          }\n        },\n        syncUI: function() {\n          if (!_.isEmpty(timer)) {\n            duration = moment.duration(timer.duration);\n            $hours.text((duration.days() * 24) + duration.hours());\n            $minutes.text(duration.minutes());\n            $seconds.text(duration.seconds());\n            lastUpdate = moment();\n\n            if (timer.active) {\n              if (runIntervalId) {\n                clearInterval(runIntervalId);\n              }\n              runIntervalId = setInterval(TimerDetail.tick, 1000);\n              $pauseBtn.show();\n              $startBtn.hide();\n              $endBtn.show();\n              $timerStatus.removeClass('timer-stopped');\n            } else {\n              if (timer.complete) {\n                $pauseBtn.hide();\n                $startBtn.hide();\n                $endBtn.hide();\n              } else {\n                $pauseBtn.hide();\n                $startBtn.show();\n                $endBtn.show();\n              }\n              $timerStatus.addClass('timer-stopped');\n            }\n\n            $tummytimeCard.toggleClass('card-active', timer.is_tummytime);\n            $feedingCard.toggleClass('card-active', timer.is_feeding);\n            $sleepCard.toggleClass('card-active', timer.is_sleeping);\n          } else {\n            $startBtn.show();\n            $tummytimeCard.toggleClass('card-active', false);\n            $feedingCard.toggleClass('card-active', false);\n            $sleepCard.toggleClass('card-active', false);\n          }\n        },\n        fetchTimer: function() {\n          if (timerId) {\n            return $.get(BabyBuddy.ApiRoutes.timerDetail(timerId))\n            .then(function(response){\n              timer = response;\n              duration = moment.duration(timer.duration);\n              self.reportTimerStatusMessage();\n              self.syncUI();\n              return response;\n            });\n          }\n        },\n        fetchAccounts: function() {\n          return $.get('/api/accounts/')\n            .then(function(response){\n              accounts = response;\n              if (!$accountSelect.val() && accounts.length) {\n                $accountSelect.val(accounts[0].id);\n                $accountSelect.change();\n              }\n              return response;\n            });\n        },\n        fetchChildren: function() {\n          return $.get('/api/children/')\n            .then(function(response){\n              children = response;\n              self.fillChildOptions(children);\n              return response;\n            });\n        },\n        reportTimerStatusMessage: function() {\n          $timerStatusMsg.empty();\n          if (!_.isEmpty(timer) && timer.end) {\n            const endedAt = moment(timer.end).format('YYYY-MM-DD hh:mm a');\n            if (!timer.active && !timer.complete && timer.end) {\n              $timerStatusMsg.html(`Paused at ${endedAt}`);\n            } else if (timer.complete) {\n              $timerStatusMsg.html(`Completed at ${endedAt}`);\n            }\n          }\n        },\n        save: function() {\n          timer.is_feeding = $feedingCard.is('.card-active');\n          timer.is_sleeping = $sleepCard.is('.card-active');\n          timer.is_tummytime = $tummytimeCard.is('.card-active');\n          timer.name = $name.val();\n          timer.child = $childrenSelect.val();\n          timer.account = $accountSelect.val();\n          return $.post(BabyBuddy.ApiRoutes.timerDetail(timerId), timer)\n            .then((response) => {\n              timer = response;\n              duration = moment.duration(timer.duration);\n              self.reportTimerStatusMessage();\n              self.syncUI();\n              return response;\n            });\n        },\n        createTimer: function() {\n          timer = {\n            name: $name.val(),\n            user: userId,\n            child: $childrenSelect.val(),\n            account: $accountSelect.val(),\n            is_feeding: $feedingCard.is('.card-active'),\n            is_sleeping: $sleepCard.is('.card-active'),\n            is_tummytime: $tummytimeCard.is('.card-active')\n          }\n          return $.post(BabyBuddy.ApiRoutes.timers(), timer)\n            .then((response) => {\n              timer = response;\n              duration = moment.duration(timer.duration);\n              timerId = timer.id;\n              $endBtn.show();\n              $startBtn.hide();\n              $pauseBtn.show();\n              $endBtn.prop('href', `${BabyBuddy.host()}/timer/${timerId}/stop/`);\n              self.run();\n              self.syncUI();\n              BabyBuddy.updateTimerNavSpan();\n              setTimeout(() => {\n                window.location.href = `/timer/${timerId}/`;\n              }, 1200);\n              return response;\n            });\n        }\n    };\n\n    return TimerDetail;\n}(window);\n","\nBabyBuddy.TummyTime = function() {\n  let $el;\n  let userId;\n  let childId;\n  let tummyTimeId;\n  let tummyTime = {};\n  let tummyTimes = [];\n  let $milestone;\n  let $tableBody;\n  let $startPicker;\n  let $endPicker;\n  let $addBtn;\n  let $saveBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let detailPickerInitialized = false;\n  let tummytimeDao;\n  let tummytimeChart;\n\n  let self;\n\n  const TummyTime = {\n    init: (el, uId, cId, tId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      tummyTimeId = tId;\n      $startPicker = $el.find('#tummytime-datetimepicker_start');\n      $endPicker = $el.find('#tummytime-datetimepicker_end');\n      $milestone = $el.find('#milestone');\n      $tableBody = $el.find('tbody');\n      $addBtn = $el.find('#tummytime-add-btn');\n      $saveBtn = $el.find('#tummytime-save-btn');\n      $addModal = $el.find('#tummytime-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $startFilterPicker = $el.find('#tummytime-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#tummytime-filter-datetimepicker_end');\n      tummytimeDao = BabyBuddy.ChildDurationActivityDao();\n      tummytimeChart = BabyBuddy.TummyTimeChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && tummyTimeId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.tummyTimeDetail(childId, tummyTimeId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!tummyTimeId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(14, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      const hasTummyTime = !_.isEmpty(tummyTime);\n      const startDefault = hasTummyTime && tummyTime.start ? moment(tummyTime.start) : moment().subtract(2, 'minutes');\n      const endDefault = hasTummyTime && tummyTime.end ? moment(tummyTime.end) : moment();\n\n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n\n      $milestone.val(!_.isEmpty(tummyTime) && tummyTime.milestone ? tummyTime.milestone : '');\n    },\n    syncTable: () => {\n      if (!_.isEmpty(tummyTimes)) {\n        $tableBody.empty();\n        let html = tummyTimes.map(t => {\n          const start = moment(t.start).format('YYYY-MM-DD hh:mm a');\n          const end = moment(t.end).format('YYYY-MM-DD hh:mm a');\n          let duration = moment.duration(t.duration);\n          let durationStr = '';\n          if (duration.hours()) {\n            if (duration.minutes()) {\n              durationStr = `${duration.hours()} hrs ${duration.minutes()} mins`;\n            } else {\n              durationStr = `${duration.hours()} hrs`;\n            }\n          } else if (duration.minutes()) {\n            durationStr = `${duration.minutes()} mins`;\n          }\n          const milestone = t.milestone || '';\n          return `\n            <tr>\n              <td class=\"text-center\">${durationStr}</td>\n              <td class=\"text-center\">${start}</td>\n              <td class=\"text-center\">${end}</td>\n              <td class=\"text-center\">${milestone}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-tummytime=\"${t.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-tummytime=\"${t.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          tummyTimeId = parseInt($target.data('tummytime'));\n          tummyTime = tummyTimes.find(c => c.id === tummyTimeId);\n          self.syncInputs();\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          tummyTimeId = parseInt($target.data('tummytime'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(tummyTime)) {\n          tummyTime = {};\n        }\n        tummyTime.child = childId;\n        tummyTime.start = $startPicker.datetimepicker('viewDate').toISOString();\n        tummyTime.end = $endPicker.datetimepicker('viewDate').toISOString();\n        tummyTime.milestone = $milestone.val();\n      }\n    },\n    isValidInputs: () => {\n      const startDate = $startPicker.datetimepicker('viewDate');\n      const endDate = $endPicker.datetimepicker('viewDate');\n      const datesValid =  startDate.isValid() &&  endDate.isValid() && startDate.isBefore(endDate);\n      return datesValid;\n    },\n    fetch: () => {\n      $.get(BabyBuddy.ApiRoutes.tummyTime(childId, tummyTimeId))\n        .then((response) => {\n          tummyTime = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.tummyTime(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate').startOf('day');\n      const e = $endFilterPicker.datetimepicker('viewDate').endOf('day');\n      return tummytimeDao.fetch(url, s, e).then(response => {\n        tummyTimes = response;\n        self.syncTable();\n        const $chartContainer = $el.find('#tummytime-chart-container');\n\n        $(window).resize(() => {\n          tummytimeChart.plot($chartContainer, tummyTimes, s, e);\n        });\n        $(window).on('orientationchange', () => {\n          tummytimeChart.plot($chartContainer, tummyTimes, s, e);\n        });\n        tummytimeChart.plot($chartContainer, tummyTimes, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.tummyTime(childId), tummyTime)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        }).catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.tummyTimeDetail(childId, tummyTimeId), tummyTime)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        }).catch(err => {\n          console.log('error', err);\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      tummyTime = {};\n      tummyTimeId = null;\n      const startDefault = moment().subtract(2, 'minutes');\n      const endDefault = moment();\n\n      BabyBuddy.setDurationPickerConstraints(\n        detailPickerInitialized,\n        startDefault,\n        endDefault,\n        $startPicker,\n        $endPicker\n      );\n      detailPickerInitialized = true;\n\n      $milestone.val('');\n    }\n  };\n\n  self = TummyTime;\n  return self;\n}();\n","\nBabyBuddy.Weight = function() {\n  let $el;\n  let userId;\n  let childId;\n  let weightId;\n  let weight;\n  let weights = [];\n  let $datePicker;\n  let $weight;\n  let $ounces;\n  let $units;\n  let $tableBody;\n  let $saveBtn;\n  let $addBtn;\n  let $addModal;\n  let $deleteModal;\n  let $confirmDeleteBtn;\n  let $startFilterPicker;\n  let $endFilterPicker;\n  let weightDao;\n  let detailPickerInitialized = false;\n  let weightChart;\n  let self;\n\n  const Weight = {\n    init: (el, uId, cId, wId=null) => {\n      $el = $(el);\n      userId = uId;\n      childId = cId;\n      weightId = wId;\n      $weight= $el.find('#weight');\n      $ounces = $el.find('#ounces');\n      $units = $el.find('#units');\n      $tableBody = $el.find('tbody');\n      $saveBtn = $el.find('#weight-save-btn');\n      $addBtn = $el.find('#weight-add-btn');\n      $addModal = $el.find('#weight-modal');\n      $deleteModal = $el.find('#confirm-delete-modal');\n      $confirmDeleteBtn = $el.find('#confirm-delete-btn');\n      $datePicker = $el.find('#weight-datetimepicker_date');\n      $startFilterPicker = $el.find('#weight-filter-datetimepicker_start');\n      $endFilterPicker = $el.find('#weight-filter-datetimepicker_end');\n      weightDao = BabyBuddy.ChildTimeActivityDao('date');\n      // weightChart = BabyBuddy.WeightChart();\n\n      $confirmDeleteBtn.click((evt) => {\n        if (childId && weightId) {\n          $.ajax({\n            url: BabyBuddy.ApiRoutes.weightDetail(childId, weightId),\n            type: 'DELETE'\n          }).then((response) => {\n            self.clear();\n            $deleteModal.modal('hide');\n            self.fetchAll();\n          });\n        }\n      });\n\n      $addBtn.click((evt) => {\n        evt.preventDefault();\n        self.clear();\n        self.showAddModal();\n      });\n      $saveBtn.click((evt) => {\n        if (self.isValidInputs()) {\n          self.syncModel();\n          if (!weightId) {\n            self.create();\n          } else {\n            self.update();\n          }\n        }\n      });\n\n      $startFilterPicker.datetimepicker({\n        defaultDate: moment().subtract(90, 'days'),\n        format: 'YYYY-MM-DD'\n      });\n\n      $endFilterPicker.datetimepicker({\n        defaultDate: moment(),\n        format: 'YYYY-MM-DD'\n      });\n\n      $startFilterPicker.on('change.datetimepicker', function(evt){\n        $endFilterPicker.datetimepicker('minDate', moment(evt.date).add(1, 'days'));\n        self.fetchAll();\n      });\n\n      $endFilterPicker.on('change.datetimepicker', function(evt) {\n        self.fetchAll();\n      });\n\n      $units.change(function(evt){\n        if ($units.val() === 'pounds') {\n          $ounces.parent().show();\n          $weight.parent().find('label').html('Pounds');\n        } else {\n          $ounces.parent().hide();\n          $weight.parent().find('label').html('Kilograms');\n        }\n      });\n\n      self.fetchAll();\n    },\n    showAddModal: () => {\n      $addModal.modal('show');\n      self.syncInputs();\n    },\n    syncInputs: () => {\n      const empty = _.isEmpty(weight);\n      let defaultDate = !empty && weight.date ? moment(weight.date) : moment();\n      if (!detailPickerInitialized) {\n        $datePicker.datetimepicker({\n          defaultDate: defaultDate,\n          format: 'YYYY-MM-DD'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $datePicker.datetimepicker('date', defaultDate);\n      }\n\n      const w = !empty ? weight.weight : 0;\n      $units.val(!empty ? weight.units : 'pounds');\n      if ($units.val() === 'pounds') {\n        const pounds = Math.floor(w);\n        const ounces = Math.round((w - pounds) * 16);\n        $weight.val(pounds);\n        $ounces.val(ounces);\n      } else {\n        $weight.val(w);\n      }\n    },\n    syncTable: () => {\n      if (!_.isEmpty(weights)) {\n        $tableBody.empty();\n        let html = weights.map(w => {\n          const date = moment(w.date).format('YYYY-MM-DD');\n          let wt = parseFloat(w.weight || 0);\n          if (w.units === 'pounds') {\n            const pounds = Math.floor(wt);\n            const ounces = Math.round((wt - pounds) * 16);\n            wt = `${pounds} lbs ${ounces} oz`;\n          } else {\n            wt = `${wt.toFixed(3)} kg`;\n          }\n          return `\n            <tr>\n              <td class=\"text-center\">${wt}</td>\n              <td class=\"text-center\">${date}</td>\n              <td class=\"text-center\">\n                <div class=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Actions\">\n                  <a class=\"btn btn-primary update-btn\" data-weight=\"${w.id}\">\n                    <i class=\"icon icon-update\" aria-hidden=\"true\"></i>\n                  </a>\n                  <a class=\"btn btn-danger delete-btn\" data-weight=\"${w.id}\">\n                    <i class=\"icon icon-delete\" aria-hidden=\"true\"></i>\n                  </a>\n                </div>\n              </td>\n            </tr>\n          `;\n        }).join('\\n');\n        $tableBody.html(html);\n        $el.find('.update-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          weightId = parseInt($target.data('weight'));\n          weight = weights.find(c => c.id === weightId);\n          window.scrollTo(0, 0);\n          self.showAddModal();\n        });\n\n        $el.find('.delete-btn').click((evt) => {\n          evt.preventDefault();\n          const $target = $(evt.currentTarget);\n          weightId = parseInt($target.data('weight'));\n          $deleteModal.modal('show');\n        });\n      }\n    },\n    syncModel: () => {\n      if (self.isValidInputs()) {\n        if (_.isEmpty(weight)) {\n          weight = {};\n        }\n        weight.child = childId;\n        weight.date = $datePicker.datetimepicker('viewDate').format('YYYY-MM-DD');\n        weight.units = $units.val();\n        weight.weight = parseFloat($weight.val());\n        if (weight.units === 'pounds') {\n          const ounces = parseFloat($ounces.val()) / 16;\n          if (ounces && !isNaN(ounces)) {\n            weight.weight += ounces;\n          }\n        }\n      }\n    },\n    isValidInputs: () => {\n      try {\n        const wt = parseFloat($weight.val());\n        if (wt <= 0) {\n          return false;\n        }\n        if ($units.val() === 'pounds') {\n          const ounces = parseFloat($ounces.val());\n          if (ounces < 0) {\n            return false;\n          }\n        }\n      } catch(err) {\n        return false;\n      }\n      return $datePicker.datetimepicker('viewDate').isValid();\n    },\n    fetch: () => {\n      return $.get(BabyBuddy.ApiRoutes.weightDetail(childId, weightId))\n        .then((response) => {\n          weight = response;\n          self.syncInputs();\n          return response;\n        });\n    },\n    fetchAll: () => {\n      const url = BabyBuddy.ApiRoutes.weight(childId);\n      const s = $startFilterPicker.datetimepicker('viewDate');\n      const e = $endFilterPicker.datetimepicker('viewDate');\n      return weightDao.fetch(url, s.startOf('day'), e.endOf('day')).then(response => {\n        weights = response;\n        self.syncTable();\n        // $(window).resize(() => {\n        //   weightChart.plot($el.find('#weight-chart'), $el.find('#weight-chart-container'), weights, s, e);\n        // });\n        // weightChart.plot($el.find('#weight-chart'), $el.find('#weight-chart-container'), weights, s, e);\n        return response;\n      });\n    },\n    create: () => {\n      return $.post(BabyBuddy.ApiRoutes.weight(childId), weight)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    update: () => {\n      return $.post(BabyBuddy.ApiRoutes.weightDetail(childId, weightId), weight)\n        .then((response) => {\n          $addModal.modal('hide');\n          self.clear();\n          return self.fetchAll();\n        })\n        .catch(err => {\n          if (err.responseJSON && err.responseJSON.message) {\n            $addModal.find('#error-message').html(err.responseJSON.message);\n          }\n        });\n    },\n    clear: () => {\n      weight = {};\n      weightId = null;\n      let defaultDate =  moment();\n      if (!detailPickerInitialized) {\n        $datePicker.datetimepicker({\n          defaultDate: defaultDate,\n          format: 'YYYY-MM-DD'\n        });\n        detailPickerInitialized = true;\n      } else {\n        $datePicker.datetimepicker('date', defaultDate);\n      }\n      $weight.val(0);\n    }\n  };\n  self = Weight;\n  return self;\n}();\n","/* Baby Buddy Dashboard\n *\n * Provides a \"watch\" function to update the dashboard at one minute intervals\n * and/or on visibility state changes.\n */\nBabyBuddy.Dashboard = function ($) {\n    var runIntervalId = null;\n    var dashboardElement = null;\n    var hidden = null;\n\n    var Dashboard = {\n        watch: function(element_id, refresh_rate) {\n            dashboardElement = $('#' + element_id);\n\n            if (dashboardElement.length == 0) {\n                console.error('Baby Buddy: Dashboard element not found.');\n                return false;\n            }\n\n            if (typeof document.hidden !== \"undefined\") {\n                hidden = \"hidden\";\n            }\n            else if (typeof document.msHidden !== \"undefined\") {\n                hidden = \"msHidden\";\n            }\n            else if (typeof document.webkitHidden !== \"undefined\") {\n                hidden = \"webkitHidden\";\n            }\n\n            if (typeof window.addEventListener === \"undefined\" || typeof document.hidden === \"undefined\") {\n                if (refresh_rate) {\n                    runIntervalId = setInterval(this.update, refresh_rate);\n                }\n            }\n            else {\n                window.addEventListener('focus', Dashboard.handleVisibilityChange, false);\n            }\n        },\n\n        handleVisibilityChange: function() {\n            if (!document[hidden]) {\n                Dashboard.update();\n            }\n        },\n\n        update: function() {\n            // TODO: Someday maybe update in place?\n            location.reload();\n        }\n    };\n\n    return Dashboard;\n}(jQuery);\n"]}